OS is AL2023: /usr/bin/ruby
Sleeping for a random period of time up to 10 minutes
Sleeping for 476.78805139480556 seconds
Sun Jan 18 17:22:58 UTC 2026

# how long have we been up
uptime
 17:22:58 up 11 min,  0 users,  load average: 2.57, 3.12, 1.73

# whats running, with ASCII-art process hierarchy (forest)
if [ "$dumpType" == "full" ]
then
  ps auxwwwf
else
  ps auxf --width=200
fi
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           2  0.0  0.0      0     0 ?        S    17:11   0:00 [kthreadd]
root           3  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [rcu_gp]
root           4  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [rcu_par_gp]
root           5  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [slub_flushwq]
root           6  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [netns]
root           7  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/0:0-events]
root           8  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/0:0H-events_highpri]
root          10  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [mm_percpu_wq]
root          11  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [rcu_tasks_kthread]
root          12  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [rcu_tasks_rude_kthread]
root          13  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [rcu_tasks_trace_kthread]
root          14  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [ksoftirqd/0]
root          15  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [rcu_preempt]
root          16  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [migration/0]
root          17  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/0:1-events]
root          18  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [cpuhp/0]
root          19  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [cpuhp/1]
root          20  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [migration/1]
root          21  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [ksoftirqd/1]
root          22  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/1:0-cgroup_offline]
root          23  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/1:0H-events_highpri]
root          24  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [cpuhp/2]
root          25  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [migration/2]
root          26  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [ksoftirqd/2]
root          28  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/2:0H-events_highpri]
root          29  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [cpuhp/3]
root          30  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [migration/3]
root          31  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [ksoftirqd/3]
root          32  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/3:0-events]
root          33  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/3:0H-events_highpri]
root          37  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/u8:3-events_unbound]
root          38  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [kdevtmpfs]
root          39  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [inet_frag_wq]
root          40  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [kauditd]
root          41  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [khungtaskd]
root          42  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [oom_reaper]
root          43  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [writeback]
root          44  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [kcompactd0]
root          46  0.0  0.0      0     0 ?        SN   17:11   0:00  \_ [khugepaged]
root          47  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [cryptd]
root          48  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kintegrityd]
root          49  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kblockd]
root          50  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [blkcg_punt_bio]
root          51  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [tpm_dev_wq]
root          52  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [md]
root          53  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [edac-poller]
root          54  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [watchdogd]
root          56  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/0:1H-kblockd]
root          81  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [kswapd0]
root          87  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfsalloc]
root          88  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs_mru_cache]
root          91  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kthrotld]
root         115  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/2:1-mm_percpu_wq]
root         144  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [nvme-wq]
root         145  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [nvme-reset-wq]
root         148  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [nvme-delete-wq]
root         167  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/u8:9-xfs-cil/nvme2n1]
root         204  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [mld]
root         205  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [ipv6_addrconf]
root         206  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/2:1H-xfs-log/nvme1n1p1]
root         216  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kstrp]
root         228  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [zswap-shrink]
root         229  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/u9:0]
root         388  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/1:1H-kblockd]
root         394  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [kworker/3:1H-kblockd]
root         982  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/2:2-cgroup_bpf_destroy]
root         987  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-buf/nvme0n1]
root         989  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-conv/nvme0n]
root         990  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-reclaim/nvm]
root         991  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-blockgc/nvm]
root         992  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-inodegc/nvm]
root         993  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-log/nvme0n1]
root         994  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-cil/nvme0n1]
root         995  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [xfsaild/nvme0n1p1]
root        1591  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/2:4-events]
root        1605  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/1:3-events]
root        1606  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/1:4-cgroup_release]
root        1616  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [rpciod]
root        1617  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xprtiod]
root        1687  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [ena]
root        1714  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/3:2-events]
root        2341  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-buf/nvme1n1]
root        2342  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-conv/nvme1n]
root        2343  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-reclaim/nvm]
root        2344  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-blockgc/nvm]
root        2345  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-inodegc/nvm]
root        2348  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-log/nvme1n1]
root        2349  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-cil/nvme1n1]
root        2350  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [xfsaild/nvme1n1p1]
root        2424  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-buf/nvme1n1]
root        2425  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-conv/nvme1n]
root        2426  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-reclaim/nvm]
root        2427  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-blockgc/nvm]
root        2428  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-inodegc/nvm]
root        2432  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-log/nvme1n1]
root        2433  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-cil/nvme1n1]
root        2434  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [xfsaild/nvme1n1p2]
root        2479  0.0  0.0      0     0 ?        I    17:11   0:00  \_ [kworker/u8:10-flush-259:2]
root        2529  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-buf/nvme2n1]
root        2530  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-conv/nvme2n]
root        2531  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-reclaim/nvm]
root        2532  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-blockgc/nvm]
root        2533  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-inodegc/nvm]
root        2537  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-log/nvme2n1]
root        2538  0.0  0.0      0     0 ?        I<   17:11   0:00  \_ [xfs-cil/nvme2n1]
root        2539  0.0  0.0      0     0 ?        S    17:11   0:00  \_ [xfsaild/nvme2n1]
root        6981  0.0  0.0      0     0 ?        I    17:15   0:00  \_ [kworker/3:3-events]
root        7585  0.0  0.0      0     0 ?        I    17:16   0:00  \_ [kworker/3:4-mm_percpu_wq]
root        7704  0.0  0.0      0     0 ?        I    17:17   0:00  \_ [kworker/1:1-cgroup_bpf_destroy]
root        8055  0.0  0.0      0     0 ?        I    17:18   0:00  \_ [kworker/0:2-cgroup_release]
root        8155  0.0  0.0      0     0 ?        I    17:19   0:00  \_ [kworker/0:3-cgroup_release]
root        8295  0.0  0.0      0     0 ?        I    17:19   0:00  \_ [kworker/u8:0-events_unbound]
root        8297  0.0  0.0      0     0 ?        I    17:19   0:00  \_ [kworker/1:2-xfs-reclaim/nvme2n1]
root        8298  0.0  0.0      0     0 ?        I    17:19   0:00  \_ [kworker/1:5-mm_percpu_wq]
root           1  0.7  0.1 172980 18040 ?        Ss   17:11   0:04 /usr/lib/systemd/systemd --switched-root --system --deserialize=32
root        1041  0.0  0.1  54108 18780 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-journald
systemd+    1614  0.0  0.0  22600 15184 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-resolved
root        1615  0.0  0.0  31896 11472 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-udevd
root        1619  0.0  0.0  21184  2216 ?        S<sl 17:11   0:00 /sbin/auditd
dbus        1792  0.0  0.0   8500  4116 ?        Ss   17:11   0:00 /usr/bin/dbus-broker-launch --scope system --audit
dbus        1793  0.0  0.0   5512  3044 ?        S    17:11   0:00  \_ dbus-broker --log 4 --controller 9 --machine-id ec276fc410ae8f3bf6c5605dc1bcdbc7 --max-bytes 536870912 --max-fds 4096 --max-matches 16384 --audit
root        1794  0.0  0.0  16352  6456 ?        Ss   17:11   0:00 /usr/bin/systemd-inhibit --what=handle-suspend-key:handle-hibernate-key --who=noah --why=acpid instead --mode=block /usr/sbin/acpid -f
root        1834  0.0  0.0   2684  1140 ?        S    17:11   0:00  \_ /usr/sbin/acpid -f
root        1797  0.0  0.0  81420  1576 ?        Ssl  17:11   0:00 /usr/sbin/irqbalance --foreground
libstor+    1798  0.0  0.0   2772  1980 ?        Ss   17:11   0:00 /usr/bin/lsmd -d
rtkit       1801  0.0  0.0 155932  2628 ?        SNsl 17:11   0:00 /usr/libexec/rtkit-daemon
root        1806  0.0  0.0  16872  8040 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-homed
root        1808  0.0  0.0  19044 10624 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-logind
root        1810  0.0  0.0 531916  6452 ?        Ssl  17:11   0:00 /usr/libexec/upowerd
systemd+    1851  0.0  0.0 236944  9968 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-networkd
polkitd     1853  0.0  0.0 314204  7264 ?        Ssl  17:11   0:00 /usr/lib/polkit-1/polkitd --no-debug --log-level=err
root        1872  0.0  0.0 281944  3756 ?        Ssl  17:11   0:00 /usr/sbin/gssproxy -D
root        3822  0.0  0.1 1240692 19612 ?       Ssl  17:11   0:00 /usr/bin/amazon-ssm-agent
root        3831  0.0  0.0  14376  7960 ?        Ss   17:11   0:00 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups
root        3848  0.0  0.0   4764  2640 ?        Ss   17:11   0:00 /usr/sbin/atd -f
root        3852  0.0  0.0 224428  3644 ?        Ss   17:11   0:00 /usr/sbin/crond -n
root        6766  0.0  0.0 224428  2464 ?        S    17:15   0:00  \_ /usr/sbin/CROND -n
root        6767  0.0  0.0 222964  3312 ?        Ss   17:15   0:00      \_ /bin/sh -c timeout -s SIGKILL 2h /usr/bin/dump-instance-state full 10 > /emr/instance-state/instance-state.log-`date +%Y-%m-%d-%H-%M` 2>&1
root        6771  0.0  0.0 221380  1008 ?        S    17:15   0:00          \_ timeout -s SIGKILL 2h /usr/bin/dump-instance-state full 10
root        6774  0.0  0.0 222964  3436 ?        S    17:15   0:00              \_ /usr/bin/bash /usr/bin/dump-instance-state full 10
root        9707  0.0  0.0 223752  2940 ?        R    17:22   0:00                  \_ ps auxwwwf
root        3853  0.0  0.0 221360  1076 tty1     Ss+  17:11   0:00 /sbin/agetty -o -p -- \u --noclear - linux
root        3855  0.0  0.0 221404  1076 ttyS0    Ss+  17:11   0:00 /sbin/agetty -o -p -- \u --keep-baud 115200,57600,38400,9600 - vt220
chrony      3863  0.0  0.0  86452  3924 ?        S    17:11   0:00 /usr/sbin/chronyd -F 2
root        4099  2.7  2.6 4970816 426080 ?      Sl   17:12   0:18 /usr/lib/jvm/jre-17/bin/java -Xmx1024m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/logpusher/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.logpusher.Main /etc/logpusher/logpusher.properties
root        4139  0.7  1.1 5116444 189644 ?      Sl   17:12   0:04 /usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main
root        4193  0.0  0.0  16352  6312 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-userdbd
root        9307  0.0  0.0  16944  7568 ?        S    17:22   0:00  \_ systemd-userwork: waiting...
root        9308  0.0  0.0  16768  7620 ?        S    17:22   0:00  \_ systemd-userwork: waiting...
root        9309  0.0  0.0  16768  7656 ?        S    17:22   0:00  \_ systemd-userwork: waiting...
hadoop      4255  3.5  2.7 4969980 439400 ?      Sl   17:12   0:23 /usr/lib/jvm/jre-17/bin/java -Djava.security.properties=/emr/instance-controller/lib/security.properties -Xmx1024m -Djute.maxbuffer=3145728 -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/instance-controller/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.instancecontroller.Main
root        4474  0.0  0.0 234504  8276 ?        S    17:12   0:00 sudo -u hadoop yarn app --list --appStates ALL
hadoop      4552  0.4  0.9 5989052 157232 ?      Sl   17:12   0:03  \_ /etc/alternatives/jre/bin/java -Dproc_app -Djava.net.preferIPv4Stack=true -Dsun.net.inetaddr.ttl=30 -Dservice.libdir=/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir=/usr/lib/hadoop/logs -Dyarn.log.file=hadoop.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/usr/lib/hadoop/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hadoop -Dhadoop.root.logger=INFO,console -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.client.cli.ApplicationCLI app --list --appStates ALL
root        4475  0.0  0.0 221812  2284 ?        S    17:12   0:00 grep application_
root        4476  0.0  0.0 224652  3248 ?        S    17:12   0:00 awk -F\t {gsub(/^ +| +$/, "", $1);gsub(/^ +| +$/, "", $6);gsub(/^ +| +$/, "", $10); print $1 "," $6 "," $10}
hadoop      4542  0.0  0.0  22212 14260 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd --user
hadoop      4545  0.0  0.0 174320  7184 ?        S    17:12   0:00  \_ (sd-pam)
root        5108  0.0  0.2 1957460 40640 ?       Ssl  17:13   0:00 /usr/bin/containerd
root        5141  0.0  0.5 2003512 81060 ?       Ssl  17:13   0:00 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --default-ulimit nofile=32768:65536
hdfs        5878  1.6  2.0 2888400 329120 ?      Sl   17:13   0:09 /usr/lib/jvm/jre-17/bin/java -Dproc_datanode -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dhadoop.security.logger=ERROR,DRFAS -Dyarn.log.dir=/var/log/hadoop-hdfs -Dyarn.log.file=hadoop-hdfs-datanode-ip-172-31-41-194.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx778m -Dhadoop.log.dir=/var/log/hadoop-hdfs -Dhadoop.log.file=hadoop-hdfs-datanode-ip-172-31-41-194.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hdfs -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dsun.net.inetaddr.ttl=3600 org.apache.hadoop.hdfs.server.datanode.DataNode
yarn        6516  5.8  2.8 4395392 462892 ?      Sl   17:14   0:27 /usr/lib/jvm/jre-17/bin/java -Dproc_nodemanager -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-nodemanager-ip-172-31-41-194.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2048m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-nodemanager-ip-172-31-41-194.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.nodemanager.NodeManager

# Top CPU users
ps auxwww --sort -%cpu | head -20
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
yarn        6516  5.8  2.8 4395392 462892 ?      Sl   17:14   0:27 /usr/lib/jvm/jre-17/bin/java -Dproc_nodemanager -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-nodemanager-ip-172-31-41-194.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2048m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-nodemanager-ip-172-31-41-194.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.nodemanager.NodeManager
hadoop      4255  3.5  2.7 4969980 439400 ?      Sl   17:12   0:23 /usr/lib/jvm/jre-17/bin/java -Djava.security.properties=/emr/instance-controller/lib/security.properties -Xmx1024m -Djute.maxbuffer=3145728 -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/instance-controller/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.instancecontroller.Main
root        4099  2.7  2.6 4970816 426080 ?      Sl   17:12   0:18 /usr/lib/jvm/jre-17/bin/java -Xmx1024m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/logpusher/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.logpusher.Main /etc/logpusher/logpusher.properties
hdfs        5878  1.6  2.0 2888400 329120 ?      Sl   17:13   0:09 /usr/lib/jvm/jre-17/bin/java -Dproc_datanode -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dhadoop.security.logger=ERROR,DRFAS -Dyarn.log.dir=/var/log/hadoop-hdfs -Dyarn.log.file=hadoop-hdfs-datanode-ip-172-31-41-194.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx778m -Dhadoop.log.dir=/var/log/hadoop-hdfs -Dhadoop.log.file=hadoop-hdfs-datanode-ip-172-31-41-194.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hdfs -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dsun.net.inetaddr.ttl=3600 org.apache.hadoop.hdfs.server.datanode.DataNode
root           1  0.7  0.1 172980 18040 ?        Ss   17:11   0:04 /usr/lib/systemd/systemd --switched-root --system --deserialize=32
root        4139  0.7  1.1 5116444 189644 ?      Sl   17:12   0:04 /usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main
hadoop      4552  0.4  0.9 5989052 157232 ?      Sl   17:12   0:03 /etc/alternatives/jre/bin/java -Dproc_app -Djava.net.preferIPv4Stack=true -Dsun.net.inetaddr.ttl=30 -Dservice.libdir=/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir=/usr/lib/hadoop/logs -Dyarn.log.file=hadoop.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/usr/lib/hadoop/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hadoop -Dhadoop.root.logger=INFO,console -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.client.cli.ApplicationCLI app --list --appStates ALL
root           2  0.0  0.0      0     0 ?        S    17:11   0:00 [kthreadd]
root           3  0.0  0.0      0     0 ?        I<   17:11   0:00 [rcu_gp]
root           4  0.0  0.0      0     0 ?        I<   17:11   0:00 [rcu_par_gp]
root           5  0.0  0.0      0     0 ?        I<   17:11   0:00 [slub_flushwq]
root           6  0.0  0.0      0     0 ?        I<   17:11   0:00 [netns]
root           7  0.0  0.0      0     0 ?        I    17:11   0:00 [kworker/0:0-events]
root           8  0.0  0.0      0     0 ?        I<   17:11   0:00 [kworker/0:0H-events_highpri]
root          10  0.0  0.0      0     0 ?        I<   17:11   0:00 [mm_percpu_wq]
root          11  0.0  0.0      0     0 ?        I    17:11   0:00 [rcu_tasks_kthread]
root          12  0.0  0.0      0     0 ?        I    17:11   0:00 [rcu_tasks_rude_kthread]
root          13  0.0  0.0      0     0 ?        I    17:11   0:00 [rcu_tasks_trace_kthread]
root          14  0.0  0.0      0     0 ?        S    17:11   0:00 [ksoftirqd/0]

# Top memory users
ps auxwww --sort -rss | head -20
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
yarn        6516  5.8  2.8 4395392 462892 ?      Sl   17:14   0:27 /usr/lib/jvm/jre-17/bin/java -Dproc_nodemanager -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-nodemanager-ip-172-31-41-194.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2048m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-nodemanager-ip-172-31-41-194.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.nodemanager.NodeManager
hadoop      4255  3.5  2.7 4969980 439400 ?      Sl   17:12   0:23 /usr/lib/jvm/jre-17/bin/java -Djava.security.properties=/emr/instance-controller/lib/security.properties -Xmx1024m -Djute.maxbuffer=3145728 -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/instance-controller/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.instancecontroller.Main
root        4099  2.7  2.6 4970816 426080 ?      Sl   17:12   0:18 /usr/lib/jvm/jre-17/bin/java -Xmx1024m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/logpusher/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.logpusher.Main /etc/logpusher/logpusher.properties
hdfs        5878  1.6  2.0 2888400 329120 ?      Sl   17:13   0:09 /usr/lib/jvm/jre-17/bin/java -Dproc_datanode -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dhadoop.security.logger=ERROR,DRFAS -Dyarn.log.dir=/var/log/hadoop-hdfs -Dyarn.log.file=hadoop-hdfs-datanode-ip-172-31-41-194.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx778m -Dhadoop.log.dir=/var/log/hadoop-hdfs -Dhadoop.log.file=hadoop-hdfs-datanode-ip-172-31-41-194.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hdfs -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dsun.net.inetaddr.ttl=3600 org.apache.hadoop.hdfs.server.datanode.DataNode
root        4139  0.7  1.1 5116444 189644 ?      Sl   17:12   0:04 /usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main
hadoop      4552  0.4  0.9 5989052 157232 ?      Sl   17:12   0:03 /etc/alternatives/jre/bin/java -Dproc_app -Djava.net.preferIPv4Stack=true -Dsun.net.inetaddr.ttl=30 -Dservice.libdir=/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir=/usr/lib/hadoop/logs -Dyarn.log.file=hadoop.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/usr/lib/hadoop/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hadoop -Dhadoop.root.logger=INFO,console -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.client.cli.ApplicationCLI app --list --appStates ALL
root        5141  0.0  0.5 2003512 81060 ?       Ssl  17:13   0:00 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --default-ulimit nofile=32768:65536
root        5108  0.0  0.2 1957460 40640 ?       Ssl  17:13   0:00 /usr/bin/containerd
root        3822  0.0  0.1 1240692 19612 ?       Ssl  17:11   0:00 /usr/bin/amazon-ssm-agent
root        1041  0.0  0.1  54108 18780 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-journald
root           1  0.7  0.1 172980 18040 ?        Ss   17:11   0:04 /usr/lib/systemd/systemd --switched-root --system --deserialize=32
systemd+    1614  0.0  0.0  22600 15184 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-resolved
hadoop      4542  0.0  0.0  22212 14260 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd --user
root        1615  0.0  0.0  31896 11472 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-udevd
root        1808  0.0  0.0  19044 10624 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-logind
systemd+    1851  0.0  0.0 236944  9968 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-networkd
root        4474  0.0  0.0 234504  8276 ?        S    17:12   0:00 sudo -u hadoop yarn app --list --appStates ALL
root        1806  0.0  0.0  16872  8040 ?        Ss   17:11   0:00 /usr/lib/systemd/systemd-homed
root        3831  0.0  0.0  14376  7960 ?        Ss   17:11   0:00 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups

# hows the kernel looking
dmesg | tail -n 25
[   16.958231] XFS (nvme1n1p1): Mounting V5 Filesystem
[   16.989233] XFS (nvme1n1p1): Ending clean mount
[   17.026951] XFS (nvme1n1p2): Mounting V5 Filesystem
[   17.068737] XFS (nvme1n1p2): Ending clean mount
[   17.071846] XFS (nvme1n1p2): Quotacheck needed: Please wait.
[   17.077194] XFS (nvme1n1p2): Quotacheck: Done.
[   17.107224] XFS (nvme2n1): Mounting V5 Filesystem
[   17.149457] XFS (nvme2n1): Ending clean mount
[   17.152309] XFS (nvme2n1): Quotacheck needed: Please wait.
[   17.157698] XFS (nvme2n1): Quotacheck: Done.
[   21.971294] systemd-journald[1041]: /var/log/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7/system.journal: Journal file has been deleted, rotating.
[   21.972929] systemd-journald[1041]: Failed to write entry to /var/log/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7/system.journal (22 items, 635 bytes), rotating before retrying: Identifier removed
[   23.757432] zram_generator::config[3978]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   24.200085] zram_generator::config[4134]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   99.665606] zram_generator::config[5098]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  101.132565] bridge: filtering via arp/ip/ip6tables is no longer available by default. Update your scripts to load br_netfilter if you need this.
[  101.137424] Bridge firewalling registered
[  101.308015] Initializing XFRM netlink socket
[  101.714886] zram_generator::config[5326]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  101.954401] zram_generator::config[5351]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  105.672222] zram_generator::config[5841]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  108.086955] zram_generator::config[5943]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  108.433422] zram_generator::config[5970]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  110.148568] zram_generator::config[6190]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  110.440449] zram_generator::config[6217]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.

# dump instance controller log
tail -n 100 /emr/instance-controller/log/instance-controller.log
2026-01-18 17:21:13,828 INFO arpc-98: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:14,215 INFO instance-metrics-collector-1: Starting Command: [sh /usr/bin//cpumet.sh null]
2026-01-18 17:21:15,223 INFO instance-metrics-collector-1: Completed Command: [sh /usr/bin//cpumet.sh null] in 1007ms, exitCode: 0, hadExceptionsInExecution?: false, 
2026-01-18 17:21:16,435 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:18,227 INFO instance-metrics-collector-3: Starting Command: [sh /usr/bin//proc_cpu_mem.sh null]
2026-01-18 17:21:18,828 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:20,423 INFO instance-metrics-collector-3: Completed Command: [sh /usr/bin//proc_cpu_mem.sh null] in 2196ms, exitCode: 0, hadExceptionsInExecution?: false, 
2026-01-18 17:21:21,354 INFO MetricsCollectorCoreTaskManager-1: Calling GetManagedResizeConfigurationForWorkerRequest RPC.
2026-01-18 17:21:21,366 INFO MetricsCollectorCoreTaskManager-1: Received GetManagedResizeConfigurationForWorkerRequest response, isManagedResizeEnabled is false.
2026-01-18 17:21:21,366 INFO MetricsCollectorCoreTaskManager-1: Instance level metrics frequencies are not set, so we will not start MetricCollector on Core/Task Instances.
2026-01-18 17:21:21,450 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:23,828 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:26,465 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:28,330 INFO healthSignalMonitor: Sleeping for '30000'
2026-01-18 17:21:28,828 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:31,481 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:33,825 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:36,493 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:38,828 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:41,506 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:43,832 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:46,526 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:48,828 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:51,354 INFO MetricsCollectorCoreTaskManager-1: Calling GetManagedResizeConfigurationForWorkerRequest RPC.
2026-01-18 17:21:51,376 INFO MetricsCollectorCoreTaskManager-1: Received GetManagedResizeConfigurationForWorkerRequest response, isManagedResizeEnabled is false.
2026-01-18 17:21:51,376 INFO MetricsCollectorCoreTaskManager-1: Instance level metrics frequencies are not set, so we will not start MetricCollector on Core/Task Instances.
2026-01-18 17:21:51,541 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:53,828 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:56,554 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:21:58,786 INFO healthSignalMonitor: Sleeping for '30000'
2026-01-18 17:21:58,829 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:01,567 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:03,828 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:06,583 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:07,649 INFO RemoteInstanceStateUpdater: Got 2 signed policies from master
2026-01-18 17:22:07,650 INFO RemoteInstanceStateUpdater: save policy to db: SignedPolicy SYSTEM_LOG bucket: aws157-logs-prod prefix: j-5MT0VO3U70E1/ expiration: 2026-01-18 06:12:45.348 PM
2026-01-18 17:22:07,658 INFO RemoteInstanceStateUpdater: save policy to db: SignedPolicy USER_LOG bucket: cfggii23 prefix: dsp2/logs/j-5MT0VO3U70E1/ expiration: 2026-01-18 06:12:45.373 PM
2026-01-18 17:22:07,661 INFO RemoteInstanceStateUpdater: Parsing ComponentConfigurations.
2026-01-18 17:22:07,661 INFO RemoteInstanceStateUpdater: Initializing Hadoop configurations
2026-01-18 17:22:07,661 INFO RemoteInstanceStateUpdater: ResourceManagerHostnames already populated, updating yarn-site
2026-01-18 17:22:07,661 INFO RemoteInstanceStateUpdater: hadoopConfDir /etc/hadoop/conf/
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: Apps installed []
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: Kerberos classification not found, it is not a Kerberos cluster.
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: It is not an external KDC cluster, not setting KerberosReadyToShutDown in common instance record.
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: Not Starting Kerberos Refresher, since its not a kerberized cluster
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: ClusterConfigurationUpdateHandler Received Managed resize Configuration as null
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: Touching heartbeat file: uplink
2026-01-18 17:22:07,662 INFO RemoteInstanceStateUpdater: Sleeping for '60000'
2026-01-18 17:22:08,828 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:11,596 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:12,213 INFO instance-metrics-collector-4: Starting Command: [sh /usr/bin//memmet.sh null]
2026-01-18 17:22:12,222 INFO instance-metrics-collector-4: Completed Command: [sh /usr/bin//memmet.sh null] in 8ms, exitCode: 0, hadExceptionsInExecution?: false, 
2026-01-18 17:22:13,826 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:13,841 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:13,853 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:14,215 INFO instance-metrics-collector-5: Starting Command: [sh /usr/bin//cpumet.sh null]
2026-01-18 17:22:15,228 INFO instance-metrics-collector-5: Completed Command: [sh /usr/bin//cpumet.sh null] in 1012ms, exitCode: 0, hadExceptionsInExecution?: false, 
2026-01-18 17:22:16,217 INFO instance-metrics-collector-1: Starting Command: [sh /usr/bin//diskmet.sh null]
2026-01-18 17:22:16,610 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:17,051 INFO instance-metrics-collector-1: Completed Command: [sh /usr/bin//diskmet.sh null] in 834ms, exitCode: 0, hadExceptionsInExecution?: false, 
2026-01-18 17:22:18,227 INFO instance-metrics-collector-2: Starting Command: [sh /usr/bin//proc_cpu_mem.sh null]
2026-01-18 17:22:18,827 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:20,426 INFO instance-metrics-collector-2: Completed Command: [sh /usr/bin//proc_cpu_mem.sh null] in 2199ms, exitCode: 0, hadExceptionsInExecution?: false, 
2026-01-18 17:22:21,354 INFO MetricsCollectorCoreTaskManager-1: Calling GetManagedResizeConfigurationForWorkerRequest RPC.
2026-01-18 17:22:21,369 INFO MetricsCollectorCoreTaskManager-1: Received GetManagedResizeConfigurationForWorkerRequest response, isManagedResizeEnabled is false.
2026-01-18 17:22:21,369 INFO MetricsCollectorCoreTaskManager-1: Instance level metrics frequencies are not set, so we will not start MetricCollector on Core/Task Instances.
2026-01-18 17:22:21,625 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:23,828 INFO arpc-591: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:26,637 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:28,829 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:29,159 INFO healthSignalMonitor: Sleeping for '30000'
2026-01-18 17:22:31,649 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:33,826 INFO arpc-591: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:36,660 INFO arpc-250: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:38,825 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:41,677 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:43,827 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:46,692 INFO arpc-97: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:48,831 INFO arpc-469: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: hdfs-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: httpfs-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: hadoop-env
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: yarn-env
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: yarn-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: mapred-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: core-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: hdfs-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: httpfs-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: hadoop-env
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: yarn-env
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: yarn-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: mapred-site
2026-01-18 17:22:49,485 INFO JobFlowStateUpdater: Masking ComponentConfiguration for classification: core-site
2026-01-18 17:22:49,489 INFO JobFlowStateUpdater: Sleeping for 120000
2026-01-18 17:22:51,354 INFO MetricsCollectorCoreTaskManager-1: Calling GetManagedResizeConfigurationForWorkerRequest RPC.
2026-01-18 17:22:51,363 INFO MetricsCollectorCoreTaskManager-1: Received GetManagedResizeConfigurationForWorkerRequest response, isManagedResizeEnabled is false.
2026-01-18 17:22:51,363 INFO MetricsCollectorCoreTaskManager-1: Instance level metrics frequencies are not set, so we will not start MetricCollector on Core/Task Instances.
2026-01-18 17:22:51,708 INFO arpc-591: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:53,825 INFO arpc-382: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:22:56,719 INFO arpc-538: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false

# dump instance controller stdout
tail -n 100 /emr/instance-controller/log/instance-controller.out
tail: cannot open '/emr/instance-controller/log/instance-controller.out' for reading: No such file or directory

# dump log pusher log
tail -n 100 /emr/logpusher/log/logpusher.log
        "flags": 0
      }
    ],
    "excludes": [
      {
        "pattern": "/.*uuid.*",
        "flags": 0
      }
    ],
    "recursive": true,
    "purgeKeys": false,
    "priority": 2,
    "deleteEmptyDirectories": true,
    "excludeArchiveDelete": [
      {
        "pattern": "/((?!.+/prelaunch).+\\.out)$",
        "flags": 0
      },
      {
        "pattern": "/.+\\.log",
        "flags": 0
      }
    ],
    "retentionPeriod": {
      "seconds": 14400,
      "nanos": 0
    },
    "maxPushDelay": {
      "seconds": 3600,
      "nanos": 0
    },
    "logTypes": [
      "USER_LOG",
      "SYSTEM_LOG"
    ],
    "deleteOnLowDisk": true,
    "checkForUserOverrides": true,
    "userOverrideResourceIdPattern": {
      "pattern": "(application_\\d+_\\d+)",
      "flags": 0
    }
  },
  {
    "localDirectory": "/var/log/hadoop-mapreduce/history",
    "s3Path": "hadoop-mapreduce/history/$0",
    "includes": [
      {
        "pattern": "/(.*)",
        "flags": 0
      }
    ],
    "excludes": [
      {
        "pattern": "/.*\\.crc$",
        "flags": 0
      }
    ],
    "recursive": true,
    "purgeKeys": true,
    "priority": 2,
    "deleteEmptyDirectories": false,
    "retentionPeriod": {
      "seconds": 172800,
      "nanos": 0
    },
    "maxPushDelay": {
      "seconds": 3600,
      "nanos": 0
    },
    "logTypes": [
      "USER_LOG",
      "SYSTEM_LOG"
    ],
    "deleteOnLowDisk": true,
    "checkForUserOverrides": false
  }
]
2026-01-18 17:21:44,653 INFO dsm-1: Single directory with 2 configurations, regexes should track disjoint sets of files:
localDirectory:'/mnt/var/log/', includes:[/(cloud-init.*)], excludes:[null]
localDirectory:'/mnt/var/log/', includes:[/(platform-setup.*)], excludes:[null]
2026-01-18 17:21:44,653 INFO dsm-1: Updated DiskSpaceManager configuration in 138 milliseconds
2026-01-18 17:21:44,655 INFO dsm-1: DiskSpaceManager lastSuccessTime = 2026-01-18T17:20:44.511251845Z , lastFailTime = null
2026-01-18 17:21:44,655 INFO dsm-1: cycle 10 disk: /mnt freeDiskSpaceMb: 27074/27582 MB freeDiskSpaceRatio:0.98
2026-01-18 17:21:44,655 INFO dsm-1: Disk /mnt had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:21:44,655 INFO dsm-1: cycle 10 disk: /emr freeDiskSpaceMb: 4987/5056 MB freeDiskSpaceRatio:0.99
2026-01-18 17:21:44,655 INFO dsm-1: Disk /emr had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:21:44,655 INFO dsm-1: DSM cycle finished in 142 milliseconds
2026-01-18 17:22:16,470 INFO CloudWatchAgentUpdater-1: CloudWatchAgentUpdater cycle started
2026-01-18 17:22:16,470 INFO CloudWatchAgentUpdater-1: CloudWatch config indicator file directory does not exist yet. Nothing to load...
2026-01-18 17:22:16,470 INFO CloudWatchAgentUpdater-1: CloudWatchAgentUpdater cycle started: discovered 0 configs, 0 marked for removal
2026-01-18 17:22:44,657 INFO dsm-1: DiskSpaceManager started cycle 11
2026-01-18 17:22:44,658 INFO dsm-1: /mnt   total   27582 MB free   27066 MB used    516 MB (1.87 %)
2026-01-18 17:22:44,658 INFO dsm-1: /emr   total    5056 MB free    4987 MB used     69 MB (1.36 %)
2026-01-18 17:22:44,658 INFO dsm-1: /      total   15283 MB free    8370 MB used   6913 MB (45.23 %)
2026-01-18 17:22:44,659 INFO dsm-1: DiskSpaceManager lastSuccessTime = 2026-01-18T17:21:44.655670030Z , lastFailTime = null
2026-01-18 17:22:44,660 INFO dsm-1: cycle 11 disk: /mnt freeDiskSpaceMb: 27066/27582 MB freeDiskSpaceRatio:0.98
2026-01-18 17:22:44,660 INFO dsm-1: Disk /mnt had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:22:44,660 INFO dsm-1: cycle 11 disk: /emr freeDiskSpaceMb: 4987/5056 MB freeDiskSpaceRatio:0.99
2026-01-18 17:22:44,660 INFO dsm-1: Disk /emr had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:22:44,660 INFO dsm-1: DSM cycle finished in 2 milliseconds

# dump log pusher stdout
tail -n 100 /emr/logpusher/log/logpusher.out
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.

if [ "$dumpType" == "full" ]; then 
  echo "Kicking off a dump-jstack run in the background."
  timeout -s SIGKILL 2h /usr/bin/dump-jstack > /emr/instance-state/jstack.log-`date +\%Y-\%m-\%d-\%H-\%M` 2>&1 &
fi
Kicking off a dump-jstack run in the background.

# dump service nanny log
tail -n 20 /emr/service-nanny/log/service-nanny-`date +%Y-%m-%d`
tail: cannot open '/emr/service-nanny/log/service-nanny-2026-01-18' for reading: No such file or directory

# dump mysql process list
mysqladmin -u root processlist | awk -F'|' '{print $6, $7, $8, $9}' | grep -v '^\s*$'
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local server through socket '/var/lib/mysql/mysql.sock' (2)'
Check that mariadbd is running and that the socket: '/var/lib/mysql/mysql.sock' exists!

# Can we contact dom0?
curl --connect-timeout 2 -q -f --retry 5 -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 1" >/dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100    56  100    56    0     0  51803      0 --:--:-- --:--:-- --:--:-- 56000

# Can we access master?
set +o verbose
PING 172.31.39.66 (172.31.39.66) 56(84) bytes of data.
64 bytes from 172.31.39.66: icmp_seq=1 ttl=127 time=0.178 ms
64 bytes from 172.31.39.66: icmp_seq=2 ttl=127 time=0.432 ms

--- 172.31.39.66 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1015ms
rtt min/avg/max/mdev = 0.178/0.305/0.432/0.127 ms

traceroute to 172.31.39.66 (172.31.39.66), 10 hops max, 60 byte packets
 1  172.31.39.66  0.183 ms  0.139 ms  0.126 ms


# Can we access the outside world?
curl -s -I --connect-timeout 1 --max-time 5 http://elasticmapreduce.s3.amazonaws.com | head
HTTP/1.1 200 OK
x-amz-id-2: Tod4NPYExmZqrJOKXN5lFHshHWmy5X7WhfcOOkeSjC5M9jasN8vdufWqLJiU9btlvzJXoPY9P1I=
x-amz-request-id: FZ70P6XEXQVYJ930
Date: Sun, 18 Jan 2026 17:23:00 GMT
x-amz-bucket-region: us-east-1
x-amz-access-point-alias: false
x-amz-bucket-arn: arn:aws:s3:::elasticmapreduce
Content-Type: application/xml
Transfer-Encoding: chunked
Server: AmazonS3

# Now traceroute it
traceroute -T --sport=17241 -p 443 -w 3 -n -m 10 elasticmapreduce.s3.amazonaws.com
traceroute to elasticmapreduce.s3.amazonaws.com (16.15.207.204), 10 hops max, 60 byte packets
 1  16.15.207.204  0.412 ms  0.425 ms  0.269 ms

# listing of last logged in users
last -w -n 25
reboot   system boot  6.1.158-178.288.amzn2023.x86_64 Sun Jan 18 17:11   still running

wtmp begins Sun Jan 18 17:11:37 2026

# whats io usage look like
iostat -x 1 5
Linux 6.1.158-178.288.amzn2023.x86_64 (ip-172-31-41-194.ec2.internal) 	01/18/26 	_x86_64_	(4 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
          56.20    0.00    1.87    0.91    0.01   41.01

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1         45.03   1302.89     0.02   0.04    1.19    28.94    1.17     56.52     0.15  11.63    1.30    48.41    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.06   3.86
nvme1n1          1.13     16.07     0.00   0.00    0.61    14.28    9.20    901.95     2.50  21.36    1.73    98.04    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.02   0.32
nvme2n1          0.65      6.87     0.00   0.00    0.60    10.50    1.22    125.90     0.25  16.73    1.75   102.93    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.08


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           8.27    0.00    2.58    0.00    0.00   89.15

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          0.00      0.00     0.00   0.00    0.00     0.00    3.00     32.00     0.00   0.00    1.00    10.67    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
          13.92    0.00    4.30    0.00    0.00   81.77

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    2.00      8.00     0.00   0.00    1.00     4.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   1.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
          13.50    0.00    5.50    0.00    0.00   81.00

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          2.00      8.00     0.00   0.00    0.50     4.00    3.00     32.00     0.00   0.00    0.67    10.67    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme1n1          5.00     40.00     0.00   0.00    0.80     8.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           4.00    0.00    0.50    0.00    0.00   95.50

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    5.00    380.00     1.00  16.67    1.60    76.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.01   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00



# whats memory usage look like
free -m
               total        used        free      shared  buff/cache   available
Mem:           15779        2210       12394           8        1173       13238
Swap:              0           0           0

# trend memory
vmstat 1 5
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      0 12691992   5332 1196536    0    0   330   270  509  527 56  2 41  1  0
 0  0      0 12691740   5332 1196612    0    0     0    92  558  961  0  0 100  0  0
 5  0      0 12628972   5332 1198644    0    0     0     0 1141 2818 20  4 77  0  0
11  0      0 12248968   5332 1198816    0    0     0     8 1639 5878 83 11  6  0  0
10  0      0 12208900   5332 1198808    0    0     0     0 1212 3834 99  2  0  0  0

# amount of disk free
df -lh
Filesystem        Size  Used Avail Use% Mounted on
devtmpfs          4.0M     0  4.0M   0% /dev
tmpfs             7.8G     0  7.8G   0% /dev/shm
tmpfs             3.1G  8.6M  3.1G   1% /run
/dev/nvme0n1p1     15G  6.8G  8.2G  46% /
/dev/nvme0n1p128   10M  1.3M  8.7M  13% /boot/efi
/dev/nvme1n1p1    5.0G   70M  4.9G   2% /emr
/dev/nvme1n1p2     27G  504M   27G   2% /mnt
/dev/nvme2n1       32G  263M   32G   1% /mnt1
tmpfs             1.6G  4.0K  1.6G   1% /run/user/990
tmpfs             1.6G  4.0K  1.6G   1% /run/user/0
tmpfs             1.6G  4.0K  1.6G   1% /run/user/985
tmpfs             1.6G  4.0K  1.6G   1% /run/user/987

# amount of inode free
df -ilh
Filesystem       Inodes IUsed IFree IUse% Mounted on
devtmpfs           2.0M   394  2.0M    1% /dev
tmpfs              2.0M     1  2.0M    1% /dev/shm
tmpfs              800K   723  800K    1% /run
/dev/nvme0n1p1     7.5M  111K  7.4M    2% /
/dev/nvme0n1p128      0     0     0     - /boot/efi
/dev/nvme1n1p1     2.5M    76  2.5M    1% /emr
/dev/nvme1n1p2      14M  2.8K   14M    1% /mnt
/dev/nvme2n1        16M    81   16M    1% /mnt1
tmpfs              395K    22  395K    1% /run/user/990
tmpfs              395K    21  395K    1% /run/user/0
tmpfs              395K    22  395K    1% /run/user/985
tmpfs              395K    22  395K    1% /run/user/987

set +o verbose

# Top 10 largest files and folders including not subdirectories in /mnt/
du -hsx /mnt/* | sort -rh | head -10
275M	/mnt/var
1.1M	/mnt/tmp
464K	/mnt/hdfs
104K	/mnt/yarn
0	/mnt/s3
0	/mnt/mapred

# Top 10 largest files and folders in /mnt/var/*
du -hsx /mnt/var/* | sort -rh | head -10
187M	/mnt/var/cache
62M	/mnt/var/lib
27M	/mnt/var/log
4.0K	/mnt/var/tmp
0	/mnt/var/run
0	/mnt/var/em

# Top 20 largest files and folders including subdirectories in /mnt/var/log
du -hx /mnt/var/log | sort -rh | head -20
27M	/mnt/var/log
25M	/mnt/var/log/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7
25M	/mnt/var/log/journal
896K	/mnt/var/log/hadoop-yarn
712K	/mnt/var/log/provision-node
628K	/mnt/var/log/hadoop-yarn/containers
568K	/mnt/var/log/hadoop-yarn/containers/application_1768756447690_0001
524K	/mnt/var/log/provision-node/reports/0/4c0545b8-c55e-4c8b-9482-c9f0a19cc15e
524K	/mnt/var/log/provision-node/reports/0
524K	/mnt/var/log/provision-node/reports
472K	/mnt/var/log/provision-node/reports/0/4c0545b8-c55e-4c8b-9482-c9f0a19cc15e/core_set/ip-172-31-41-194.ec2.internal
472K	/mnt/var/log/provision-node/reports/0/4c0545b8-c55e-4c8b-9482-c9f0a19cc15e/core_set
236K	/mnt/var/log/tmp/logpusher
236K	/mnt/var/log/tmp
180K	/mnt/var/log/provision-node/apps-phase/0/4c0545b8-c55e-4c8b-9482-c9f0a19cc15e
180K	/mnt/var/log/provision-node/apps-phase/0
180K	/mnt/var/log/provision-node/apps-phase
124K	/mnt/var/log/tmp/logpusher/mnt/var/log
124K	/mnt/var/log/tmp/logpusher/mnt/var
124K	/mnt/var/log/tmp/logpusher/mnt

# List the entire /emr/ partition in a human readable format
ls -lhR /emr/
/emr/:
total 4.0K
drwx------. 6 hadoop hadoop   53 Jan 18 17:12 apppusher
drwxr-x---. 6 hadoop hadoop   49 Jan 18 17:12 instance-controller
drwxr-x---. 2 hadoop hadoop  171 Jan 18 17:22 instance-state
drwx------. 6 root   root     49 Jan 18 17:12 logpusher
drwxr-xr-x. 2 hadoop hadoop   51 Jan 18 17:18 logpusher-system-overrides
drwxr-xr-x. 2 hadoop hadoop   51 Jan 18 17:18 logpusher-user-overrides
drwxr-xr-x. 2 root   root   4.0K Jan 18 17:11 setup-devices

/emr/apppusher:
total 0
drwx------. 2 hadoop hadoop  6 Jan 18 17:12 data
drwx------. 2 hadoop hadoop  6 Jan 18 17:12 local
drwx------. 2 hadoop hadoop 48 Jan 18 17:12 log
drwx------. 2 hadoop hadoop 27 Jan 18 17:12 run

/emr/apppusher/data:
total 0

/emr/apppusher/local:
total 0

/emr/apppusher/log:
total 16K
-rw-------. 1 root root 14K Jan 18 17:22 apppusher.log
-rw-------. 1 root root   0 Jan 18 17:12 apppusher.out

/emr/apppusher/run:
total 4.0K
-rw-------. 1 root root 5 Jan 18 17:12 apppusher.pid

/emr/instance-controller:
total 0
drwxr-xr-x. 3 hadoop hadoop 113 Jan 18 17:12 db
drwxr-xr-x. 4 hadoop hadoop 115 Jan 18 17:12 lib
drwxr-xr-x. 3 hadoop hadoop 129 Jan 18 17:12 log
drwxr-xr-x. 3 hadoop hadoop  75 Jan 18 17:12 run

/emr/instance-controller/db:
total 148K
-rw-r--r--. 1 hadoop hadoop  32K Jan 18 17:12 data.data
-rw-r--r--. 1 hadoop hadoop   16 Jan 18 17:23 data.lck
-rw-r--r--. 1 hadoop hadoop 128K Jan 18 17:23 data.log
-rw-r--r--. 1 hadoop hadoop  100 Jan 18 17:12 data.properties
-rw-r--r--. 1 hadoop hadoop 1.7K Jan 18 17:12 data.script
drwxr-xr-x. 2 hadoop hadoop    6 Jan 18 17:12 data.tmp

/emr/instance-controller/db/data.tmp:
total 0

/emr/instance-controller/lib:
total 8.0K
-rw-r--r--. 1 hadoop hadoop   0 Jan 18 17:12 dfs.hosts.exclude
drwxr-xr-x. 2 hadoop hadoop 104 Jan 18 17:22 info
-rw-r--r--. 1 hadoop hadoop  30 Jan 18 17:12 security.properties
drwxr-xr-x. 2 hadoop hadoop  87 Jan 18 17:12 sslKeys
-rw-r--r--. 1 hadoop hadoop  49 Jan 18 17:12 yarn.nodes.exclude.xml

/emr/instance-controller/lib/info:
total 32K
-rw-r--r--. 1 root   root   2.9K Jan 18 17:12 extraInstanceData.json
-rw-r--r--. 1 hadoop hadoop   63 Jan 18 17:12 instance.json
-rw-r--r--. 1 hadoop hadoop  18K Jan 18 17:22 job-flow-state.txt
-rw-r--r--. 1 hadoop hadoop  766 Jan 18 17:22 job-flow.json

/emr/instance-controller/lib/sslKeys:
total 12K
-rw-------. 1 hadoop hadoop 1.2K Jan 18 17:12 ic_external_trust_store
-rw-------. 1 hadoop hadoop  578 Jan 18 17:12 ic_internal_trust_store
-rw-------. 1 hadoop hadoop 1.5K Jan 18 17:12 ic_keystore

/emr/instance-controller/log:
total 224K
drwxr-xr-x. 2 hadoop hadoop   24 Jan 18 17:12 bootstrap-actions
-rw-r--r--. 1 hadoop hadoop 169K Jan 18 17:23 instance-controller.log
-rw-r--r--. 1 hadoop hadoop  210 Jan 18 17:12 instance-controller.out.2026-01-18-17-12
-rw-r--r--. 1 hadoop hadoop  25K Jan 18 17:22 monitor.log

/emr/instance-controller/log/bootstrap-actions:
total 0
-rw-r--r--. 1 hadoop hadoop 0 Jan 18 17:12 master.log

/emr/instance-controller/run:
total 4.0K
-rw-r--r--. 1 hadoop hadoop  0 Jan 18 17:12 cwmetrics.ckp
drwxr-xr-x. 2 hadoop hadoop 20 Jan 18 17:12 heartbeat
-rw-r--r--. 1 hadoop hadoop  4 Jan 18 17:12 instance-controller.pid

/emr/instance-controller/run/heartbeat:
total 0
-rw-r--r--. 1 hadoop hadoop 0 Jan 18 17:23 uplink

/emr/instance-state:
total 444K
-rw-r--r--. 1 hadoop hadoop 2.2K Jan 18 17:12 console.log-2026-01-18-17-12
-rw-r--r--. 1 root   root    68K Jan 18 17:23 instance-state.log-2026-01-18-17-15
-rw-r--r--. 1 root   root   306K Jan 18 17:23 jstack.log-2026-01-18-17-22
-rw-r--r--. 1 hadoop hadoop 2.9K Jan 18 17:12 libinstance-controller.log-2026-01-18-17-11

/emr/logpusher:
total 0
drwxr-xr-x. 3 root root 113 Jan 18 17:18 db
drwxr-xr-x. 2 root root   6 Jan 18 17:12 lib
drwxr-xr-x. 2 root root  48 Jan 18 17:12 log
drwxr-xr-x. 2 root root  27 Jan 18 17:12 run

/emr/logpusher/db:
total 52K
-rw-r--r--. 1 root root  36K Jan 18 17:18 data.data
-rw-r--r--. 1 root root   16 Jan 18 17:23 data.lck
-rw-r--r--. 1 root root  765 Jan 18 17:22 data.log
-rw-r--r--. 1 root root  102 Jan 18 17:18 data.properties
-rw-r--r--. 1 root root 2.6K Jan 18 17:18 data.script
drwxr-xr-x. 2 root root    6 Jan 18 17:12 data.tmp

/emr/logpusher/db/data.tmp:
total 0

/emr/logpusher/lib:
total 0

/emr/logpusher/log:
total 200K
-rw-r--r--. 1 root root 195K Jan 18 17:22 logpusher.log
-rw-r--r--. 1 root root  210 Jan 18 17:12 logpusher.out

/emr/logpusher/run:
total 4.0K
-rw-r--r--. 1 root root 4 Jan 18 17:12 logpusher.pid

/emr/logpusher-system-overrides:
total 4.0K
-rw-r--r--. 1 root root 123 Jan 18 17:18 application_1768756447690_0001.config

/emr/logpusher-user-overrides:
total 4.0K
-rw-r--r--. 1 root root 123 Jan 18 17:18 application_1768756447690_0001.config

/emr/setup-devices:
total 124K
-rw-r--r--. 1 root root  228 Jan 18 17:11 DiskEncryptor.log
-rw-r--r--. 1 root root  28K Jan 18 17:11 setup_drives.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root  633 Jan 18 17:11 setup_emr_metrics.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root 4.1K Jan 18 17:11 setup_tmp_dir.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root 8.6K Jan 18 17:11 setup_var_cache_dir.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root  52K Jan 18 17:11 setup_var_lib_dir.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root 6.0K Jan 18 17:11 setup_var_log_dir.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root 3.6K Jan 18 17:11 setup_var_tmp_dir.2026-01-18-17-11-45.log
-rw-r--r--. 1 root root 1.4K Jan 18 17:11 udev.2026-01-18-17-11-52.log

set -x

# list all deleted but open files
mounts=$(lsblk -o MOUNTPOINT | grep -v "^$" | grep -v "MOUNTPOINT")
++ lsblk -o MOUNTPOINT
++ grep -v MOUNTPOINT
++ grep -v '^$'
+ mounts='/mnt1
/
/boot/efi
/emr
/mnt'
echo $mounts | while read -r mount; do
  lsof $mount | grep deleted
done
+ echo /mnt1 / /boot/efi /emr /mnt
+ read -r mount
+ lsof /mnt1 / /boot/efi /emr /mnt
+ grep deleted
systemd-j  1041            root   16u   REG  259,3   8388608  8529812 /var/log.old/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7/system.journal (deleted)
auditd     1619            root    5w   REG  259,3    485412  1194089 /var/log.old/audit/audit.log (deleted)
+ read -r mount

set +x
+ set +x

# DNS Resolution Details
cat /etc/nsswitch.conf | grep 'hosts:';
hosts:      files dns myhostname

cat /etc/resolv.conf;
# This is /run/systemd/resolve/resolv.conf managed by man:systemd-resolved(8).
# Do not edit.
#
# This file might be symlinked as /etc/resolv.conf. If you're looking at
# /etc/resolv.conf and seeing this text, you have followed the symlink.
#
# This is a dynamic resolv.conf file for connecting local clients directly to
# all known uplink DNS servers. This file lists all configured search domains.
#
# Third party programs should typically not access this file directly, but only
# through the symlink at /etc/resolv.conf. To manage man:resolv.conf(5) in a
# different way, replace this symlink by a static file or a different symlink.
#
# See man:systemd-resolved.service(8) for details about the supported modes of
# operation for /etc/resolv.conf.

nameserver 172.31.0.2
search ec2.internal

cat /etc/hosts;
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost6 localhost6.localdomain6

hostname -f
ip-172-31-41-194.ec2.internal

HOSTNAME=$(hostname -f);

(time dig $(hostname -f) +noadditional +noquestion +nocomments +noclass +nocmd) |& grep -v cmd | grep -v -e '^$'
ip-172-31-41-194.ec2.internal. 59 A	172.31.41.194
;; Query time: 10 msec
;; SERVER: 172.31.0.2#53(172.31.0.2) (UDP)
;; WHEN: Sun Jan 18 17:23:08 UTC 2026
;; MSG SIZE  rcvd: 74
real	0m0.064s
user	0m0.017s
sys	0m0.000s

(time getent hosts $HOSTNAME) |& grep -v -e '^$';
fe80::c1f:3bff:fe19:1a95 ip-172-31-41-194.ec2.internal
real	0m0.007s
user	0m0.003s
sys	0m0.000s

MYIP=$(getent hosts $HOSTNAME | cut -d ' ' -f 1);

(time dig -x $MYIP +noadditional +noquestion +nocomments +noclass +nocmd) |& grep -v cmd | grep -v -e '^$'
8.e.f.ip6.arpa.		10741	SOA	localhost. nobody.invalid. 1 3600 1200 604800 10800
;; Query time: 0 msec
;; SERVER: 172.31.0.2#53(172.31.0.2) (UDP)
;; WHEN: Sun Jan 18 17:23:08 UTC 2026
;; MSG SIZE  rcvd: 160
real	0m0.040s
user	0m0.000s
sys	0m0.014s

(time getent hosts $MYIP) |& grep -v -e '^$';
fe80::c1f:3bff:fe19:1a95 ip-172-31-41-194.ec2.internal
real	0m0.017s
user	0m0.002s
sys	0m0.000s

# dump network statistics
netstat -s -e
Ip:
    Forwarding: 1
    338599 total packets received
    4 with invalid addresses
    0 forwarded
    0 incoming packets discarded
    338595 incoming packets delivered
    318210 requests sent out
Icmp:
    5 ICMP messages received
    0 input ICMP message failed
    ICMP input histogram:
        destination unreachable: 3
        echo replies: 2
    7 ICMP messages sent
    0 ICMP messages failed
    ICMP output histogram:
        destination unreachable: 3
        echo requests: 4
IcmpMsg:
        InType0: 2
        InType3: 3
        OutType3: 3
        OutType8: 4
Tcp:
    806 active connection openings
    167 passive connection openings
    261 failed connection attempts
    1 connection resets received
    20 connections established
    338153 segments received
    327360 segments sent out
    190 segments retransmitted
    0 bad segments received
    398 resets sent
Udp:
    434 packets received
    3 packets to unknown port received
    0 packet receive errors
    438 packets sent
    0 receive buffer errors
    0 send buffer errors
UdpLite:
TcpExt:
    233 TCP sockets finished time wait in fast timer
    199 delayed acks sent
    1 delayed acks further delayed because of locked socket
    Quick ack mode was activated 1907 times
    8555 packet headers predicted
    2708 acknowledgments not containing data payload received
    4620 predicted acknowledgments
    TCPLostRetransmit: 142
    TCPTimeouts: 184
    TCPLossProbes: 29
    TCPBacklogCoalesce: 174
    TCPDSACKOldSent: 1907
    TCPDSACKRecv: 5
    55 connections reset due to unexpected data
    2 connections reset due to early user close
    20 connections aborted due to timeout
    TCPDSACKIgnoredNoUndo: 5
    TCPRcvCoalesce: 172494
    TCPAutoCorking: 146
    TCPFromZeroWindowAdv: 136043
    TCPToZeroWindowAdv: 136043
    TCPWantZeroWindowAdv: 8091
    TCPSynRetrans: 4
    TCPOrigDataSent: 17559
    TCPHystartTrainDetect: 7
    TCPHystartTrainCwnd: 308
    TCPKeepAlive: 6
    TCPDelivered: 18021
    TcpTimeoutRehash: 164
    TCPDSACKRecvSegs: 5
IpExt:
    OutMcastPkts: 4
    InOctets: 3741077871
    OutOctets: 74333316
    OutMcastOctets: 160
    InNoECTPkts: 2065992
MPTcpExt:

# dump instance metrics
if [ "$dumpType" == "full" ]
then
  mon-tool --local_metrics
fi
2026-01-18 17:23:10,609 WARN main: Going to buffer response body of large or unknown size. Using getResponseBodyAsStream instead is recommended.
{
  "LogPusher-LastCycle-Duration": {
    "name": "LogPusher-LastCycle-Duration",
    "value": 5690.0,
    "unit": "Milliseconds",
    "time": 1768756755921
  },
  "Customer-Memory-Top10": {
    "name": "Customer-Memory-Top10",
    "value": 16.6,
    "unit": "Percent",
    "time": 1768756940430,
    "subMetrics": [
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Djava.net.preferIPv4Stack\u003dtrue -Dhadoop.metrics.log.level\u003dWARN -Xmx2458m --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.dns\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.util\u003dALL-UNNAMED --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/javax.script\u003dALL-UNNAMED -Dillegal-access\u003dpermit --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/sun.security.action\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djava.security.jgss/sun.security.krb5\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt/yarn/usercache/hadoop/appcache/application_1768756447690_0001/container_1768756447690_0001_01_000011/tmp -Dlog4j.configuration\u003dcontainer-log4j.properties -Dyarn.app.container.log.dir\u003d/var/log/hadoop-yarn/containers/application_1768756447690_0001/container_1768756447690_0001_01_000011 -Dyarn.app.container.log.filesize\u003d0 -Dhadoop.root.logger\u003dINFO,CLA -Dhadoop.root.logfile\u003dsyslog org.apache.hadoop.mapred.YarnChild 172.31.44.238 35315 attempt_1768756447690_0001_m_000009_0 11-Memory",
        "value": 5.1,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Djava.net.preferIPv4Stack\u003dtrue -Dhadoop.metrics.log.level\u003dWARN -Xmx2458m --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.dns\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.util\u003dALL-UNNAMED --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/javax.script\u003dALL-UNNAMED -Dillegal-access\u003dpermit --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/sun.security.action\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djava.security.jgss/sun.security.krb5\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt/yarn/usercache/hadoop/appcache/application_1768756447690_0001/container_1768756447690_0001_01_000010/tmp -Dlog4j.configuration\u003dcontainer-log4j.properties -Dyarn.app.container.log.dir\u003d/var/log/hadoop-yarn/containers/application_1768756447690_0001/container_1768756447690_0001_01_000010 -Dyarn.app.container.log.filesize\u003d0 -Dhadoop.root.logger\u003dINFO,CLA -Dhadoop.root.logfile\u003dsyslog org.apache.hadoop.mapred.YarnChild 172.31.44.238 35315 attempt_1768756447690_0001_m_000008_0 10-Memory",
        "value": 5.0,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Djava.net.preferIPv4Stack\u003dtrue -Dhadoop.metrics.log.level\u003dWARN -Xmx4916m --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.dns\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.util\u003dALL-UNNAMED --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/javax.script\u003dALL-UNNAMED -Dillegal-access\u003dpermit --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/sun.security.action\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djava.security.jgss/sun.security.krb5\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt1/yarn/usercache/hadoop/appcache/application_1768756447690_0001/container_1768756447690_0001_01_000013/tmp -Dlog4j.configuration\u003dcontainer-log4j.properties -Dyarn.app.container.log.dir\u003d/var/log/hadoop-yarn/containers/application_1768756447690_0001/container_1768756447690_0001_01_000013 -Dyarn.app.container.log.filesize\u003d0 -Dhadoop.root.logger\u003dINFO,CLA -Dhadoop.root.logfile\u003dsyslog -Dyarn.app.mapreduce.shuffle.logger\u003dINFO,shuffleCLA -Dyarn.app.mapreduce.shuffle.logfile\u003dsyslog.shuffle -Dyarn.app.mapreduce.shuffle.log.filesize\u003d0 -Dyarn.app.mapreduce.shuffle.log.backups\u003d0 org.apache.hadoop.mapred.YarnChild 172.31.44.238 35315 attempt_1768756447690_0001_r_000000_0 13-Memory",
        "value": 3.1,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio\u003d10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main-Memory",
        "value": 1.2,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/etc/alternatives/jre/bin/java -Dproc_app -Djava.net.preferIPv4Stack\u003dtrue -Dsun.net.inetaddr.ttl\u003d30 -Dservice.libdir\u003d/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir\u003d/usr/lib/hadoop/logs -Dyarn.log.file\u003dhadoop.log -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/usr/lib/hadoop/logs -Dhadoop.log.file\u003dhadoop.log -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dhadoop -Dhadoop.root.logger\u003dINFO,console -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender org.apache.hadoop.yarn.client.cli.ApplicationCLI app --list --appStates ALL-Memory",
        "value": 1.0,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/bin/dockerd -H fd:// --containerd\u003d/run/containerd/containerd.sock --default-ulimit nofile\u003d32768:65536-Memory",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756940429
      },
      {
        "name": "/usr/bin/containerd-Memory",
        "value": 0.3,
        "unit": "Percent",
        "time": 1768756940429
      },
      {
        "name": "/usr/bin/ruby -e t\u003d10*60*rand(); puts \"Sleeping for #{t} seconds\"; sleep(t)-Memory",
        "value": 0.2,
        "unit": "Percent",
        "time": 1768756940429
      },
      {
        "name": "/usr/lib/systemd/systemd --switched-root --system --deserialize\u003d32-Memory",
        "value": 0.1,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/systemd/systemd-journald-Memory",
        "value": 0.1,
        "unit": "Percent",
        "time": 1768756940429
      }
    ]
  },
  "Instance-CPU-IOWait": {
    "name": "Instance-CPU-IOWait",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756935228
  },
  "EMR-Memory": {
    "name": "EMR-Memory",
    "value": 10.0,
    "unit": "Percent",
    "time": 1768756940430
  },
  "Instance-Memory-MemUtilization": {
    "name": "Instance-Memory-MemUtilization",
    "value": 28.8907,
    "unit": "Percentage",
    "time": 1768756932222
  },
  "InstanceController-Memory": {
    "name": "InstanceController-Memory",
    "value": 2.7,
    "unit": "Percent",
    "time": 1768756940428
  },
  "LogPusher-CPU": {
    "name": "LogPusher-CPU",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756940429
  },
  "LogPusher-Total-S3Policy": {
    "name": "LogPusher-Total-S3Policy",
    "value": 2.0,
    "unit": "Count",
    "time": 1768756755921
  },
  "Instance-Disk-Used-/run/user/0": {
    "name": "Instance-Disk-Used-/run/user/0",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756341620,
    "subMetrics": [
      {
        "name": "/run/user/0",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756341620
      }
    ]
  },
  "YarnNodeManager-Memory": {
    "name": "YarnNodeManager-Memory",
    "value": 2.7,
    "unit": "Percent",
    "time": 1768756940428
  },
  "YarnNodeManager-Reboots": {
    "name": "YarnNodeManager-Reboots",
    "value": 1.0,
    "unit": "Count",
    "time": 1768756520407
  },
  "Instance-Disk-Used-/mnt": {
    "name": "Instance-Disk-Used-/mnt",
    "value": 2.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/mnt/var/cache/dnf",
        "value": 102.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/cache/dnf/amazonlinux-5ca606579ad66bce/repodata",
        "value": 50.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/lib/rpm",
        "value": 36.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/cache/dnf/amazonlinux-debuginfo-789dc7c8be0a3daa/repodata",
        "value": 27.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/log/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7",
        "value": 25.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/lib/dnf",
        "value": 5.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/cache/dnf/emr_apps-2d8a0c0bbdeef6d1/repodata",
        "value": 5.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/lib/texmf/web2c/luatex",
        "value": 3.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/cache/man",
        "value": 3.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt/var/cache/dnf/amazonlinux-source-d8da7ea683458dbc/repodata",
        "value": 2.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "YarnNodeManager-CPU": {
    "name": "YarnNodeManager-CPU",
    "value": 0.5,
    "unit": "Percent",
    "time": 1768756940428
  },
  "Instance-Disk-Used-/dev/shm": {
    "name": "Instance-Disk-Used-/dev/shm",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756937051
  },
  "InstanceController-RunTime": {
    "name": "InstanceController-RunTime",
    "value": 616.0,
    "unit": "Second",
    "time": 1768756940428
  },
  "HadoopDataNode-RunTime": {
    "name": "HadoopDataNode-RunTime",
    "value": 535.0,
    "unit": "Second",
    "time": 1768756940429
  },
  "LogPusher-Total_ResendRate": {
    "name": "LogPusher-Total_ResendRate",
    "value": 0.44444445,
    "unit": "Count",
    "time": 1768756755921
  },
  "LogPusher-LastCycle-FailedFiles": {
    "name": "LogPusher-LastCycle-FailedFiles",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756755921
  },
  "LogPusher-Reboots": {
    "name": "LogPusher-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756340430
  },
  "Customer-CPU": {
    "name": "Customer-CPU",
    "value": 227.8,
    "unit": "Percent",
    "time": 1768756940429
  },
  "Instance-Disk-Used-/mnt1": {
    "name": "Instance-Disk-Used-/mnt1",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/mnt1/yarn/usercache/hadoop",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/yarn/usercache",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/yarn/nmPrivate",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/yarn/filecache",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/yarn",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/s3",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/mapred",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1/hdfs",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/mnt1",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "LogPusher-LastCycle-StartTime": {
    "name": "LogPusher-LastCycle-StartTime",
    "value": 1.768756697805E12,
    "unit": "Milliseconds",
    "time": 1768756755921
  },
  "Instance-Disk-Used-/boot/efi": {
    "name": "Instance-Disk-Used-/boot/efi",
    "value": 13.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/boot/efi",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "Instance-Disk-Used-/emr": {
    "name": "Instance-Disk-Used-/emr",
    "value": 2.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/emr/setup-devices",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/logpusher-user-overrides",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/logpusher-system-overrides",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-state",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-controller/run",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-controller/log",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-controller/lib/sslKeys",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-controller/lib/info",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-controller/lib",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/emr/instance-controller/db",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "YarnNodeManager-RunTime": {
    "name": "YarnNodeManager-RunTime",
    "value": 439.0,
    "unit": "Second",
    "time": 1768756940428
  },
  "InstanceController-CPU": {
    "name": "InstanceController-CPU",
    "value": 0.5,
    "unit": "Percent",
    "time": 1768756940428
  },
  "LogPusher-Memory": {
    "name": "LogPusher-Memory",
    "value": 2.6,
    "unit": "Percent",
    "time": 1768756940429
  },
  "Customer-CPU-Top10": {
    "name": "Customer-CPU-Top10",
    "value": 227.8,
    "unit": "Percent",
    "time": 1768756940429,
    "subMetrics": [
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Djava.net.preferIPv4Stack\u003dtrue -Dhadoop.metrics.log.level\u003dWARN -Xmx2458m --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.dns\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.util\u003dALL-UNNAMED --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/javax.script\u003dALL-UNNAMED -Dillegal-access\u003dpermit --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/sun.security.action\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djava.security.jgss/sun.security.krb5\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt/yarn/usercache/hadoop/appcache/application_1768756447690_0001/container_1768756447690_0001_01_000011/tmp -Dlog4j.configuration\u003dcontainer-log4j.properties -Dyarn.app.container.log.dir\u003d/var/log/hadoop-yarn/containers/application_1768756447690_0001/container_1768756447690_0001_01_000011 -Dyarn.app.container.log.filesize\u003d0 -Dhadoop.root.logger\u003dINFO,CLA -Dhadoop.root.logfile\u003dsyslog org.apache.hadoop.mapred.YarnChild 172.31.44.238 35315 attempt_1768756447690_0001_m_000009_0 11-CPU",
        "value": 113.4,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Djava.net.preferIPv4Stack\u003dtrue -Dhadoop.metrics.log.level\u003dWARN -Xmx2458m --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.dns\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.util\u003dALL-UNNAMED --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/javax.script\u003dALL-UNNAMED -Dillegal-access\u003dpermit --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/sun.security.action\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djava.security.jgss/sun.security.krb5\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt/yarn/usercache/hadoop/appcache/application_1768756447690_0001/container_1768756447690_0001_01_000010/tmp -Dlog4j.configuration\u003dcontainer-log4j.properties -Dyarn.app.container.log.dir\u003d/var/log/hadoop-yarn/containers/application_1768756447690_0001/container_1768756447690_0001_01_000010 -Dyarn.app.container.log.filesize\u003d0 -Dhadoop.root.logger\u003dINFO,CLA -Dhadoop.root.logfile\u003dsyslog org.apache.hadoop.mapred.YarnChild 172.31.44.238 35315 attempt_1768756447690_0001_m_000008_0 10-CPU",
        "value": 112.9,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio\u003d10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/etc/alternatives/jre/bin/java -Dproc_app -Djava.net.preferIPv4Stack\u003dtrue -Dsun.net.inetaddr.ttl\u003d30 -Dservice.libdir\u003d/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir\u003d/usr/lib/hadoop/logs -Dyarn.log.file\u003dhadoop.log -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/usr/lib/hadoop/logs -Dhadoop.log.file\u003dhadoop.log -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dhadoop -Dhadoop.root.logger\u003dINFO,console -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender org.apache.hadoop.yarn.client.cli.ApplicationCLI app --list --appStates ALL-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Djava.net.preferIPv4Stack\u003dtrue -Dhadoop.metrics.log.level\u003dWARN -Xmx4916m --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.dns\u003dALL-UNNAMED --add-exports\u003djava.base/sun.net.util\u003dALL-UNNAMED --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/javax.script\u003dALL-UNNAMED -Dillegal-access\u003dpermit --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/sun.security.action\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djava.security.jgss/sun.security.krb5\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt1/yarn/usercache/hadoop/appcache/application_1768756447690_0001/container_1768756447690_0001_01_000013/tmp -Dlog4j.configuration\u003dcontainer-log4j.properties -Dyarn.app.container.log.dir\u003d/var/log/hadoop-yarn/containers/application_1768756447690_0001/container_1768756447690_0001_01_000013 -Dyarn.app.container.log.filesize\u003d0 -Dhadoop.root.logger\u003dINFO,CLA -Dhadoop.root.logfile\u003dsyslog -Dyarn.app.mapreduce.shuffle.logger\u003dINFO,shuffleCLA -Dyarn.app.mapreduce.shuffle.logfile\u003dsyslog.shuffle -Dyarn.app.mapreduce.shuffle.log.filesize\u003d0 -Dyarn.app.mapreduce.shuffle.log.backups\u003d0 org.apache.hadoop.mapred.YarnChild 172.31.44.238 35315 attempt_1768756447690_0001_r_000000_0 13-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "/usr/lib/systemd/systemd --switched-root --system --deserialize\u003d32-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "[kthreadd]-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "[rcu_gp]-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "[rcu_par_gp]-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756940428
      },
      {
        "name": "[slub_flushwq]-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756940428
      }
    ]
  },
  "Instance-Disk-Used-/run/user/990": {
    "name": "Instance-Disk-Used-/run/user/990",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/run/user/990/systemd/generator.late",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990/systemd/units",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990/systemd/inaccessible/dir",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990/systemd/inaccessible",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990/systemd/generator.late/xdg-desktop-autostart.target.wants",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990/systemd",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990/pulse",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/user/990",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "Instance-Disk-Used-/run": {
    "name": "Instance-Disk-Used-/run",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/run/udev/data",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937051
      },
      {
        "name": "/run/tmpfiles.d",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937051
      },
      {
        "name": "/run/systemd/users",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937051
      },
      {
        "name": "/run/systemd/transient",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937051
      },
      {
        "name": "/run/systemd/sessions",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937051
      },
      {
        "name": "/run/systemd/seats",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937051
      },
      {
        "name": "/run/systemd/resolve",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/systemd/network/70-ens5.network.d",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/systemd/netif/links",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/run/systemd/netif/leases",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "LogPusher-LastCycle-IgnoredFiles": {
    "name": "LogPusher-LastCycle-IgnoredFiles",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756755921
  },
  "Instance-Memory-MemFree": {
    "name": "Instance-Memory-MemFree",
    "value": 10361.6,
    "unit": "Megabytes",
    "time": 1768756932222
  },
  "EMR-CPU": {
    "name": "EMR-CPU",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756940429
  },
  "Customer-Memory": {
    "name": "Customer-Memory",
    "value": 17.30000000000001,
    "unit": "Percent",
    "time": 1768756940430
  },
  "LogPusher-RunTime": {
    "name": "LogPusher-RunTime",
    "value": 617.0,
    "unit": "Second",
    "time": 1768756940429
  },
  "HadoopDataNode-CPU": {
    "name": "HadoopDataNode-CPU",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756940429
  },
  "LogPusher-LastCycle-PushDuration": {
    "name": "LogPusher-LastCycle-PushDuration",
    "value": 4186.0,
    "unit": "Milliseconds",
    "time": 1768756755921
  },
  "Instance-Disk-Used-/": {
    "name": "Instance-Disk-Used-/",
    "value": 46.0,
    "unit": "Percent",
    "time": 1768756937052,
    "subMetrics": [
      {
        "name": "/usr/share/aws/aws-java-sdk-v2",
        "value": 656.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/bin",
        "value": 451.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib64",
        "value": 373.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/share/aws/aws-java-sdk",
        "value": 371.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib/locale",
        "value": 214.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib/jvm/java-25-amazon-corretto.x86_64/lib",
        "value": 206.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib/jvm/java-23-amazon-corretto.x86_64/lib",
        "value": 205.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib/jvm/java-21-amazon-corretto.x86_64/lib",
        "value": 203.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib/jvm/java-11-amazon-corretto.x86_64/lib",
        "value": 203.0,
        "unit": "Megabytes",
        "time": 1768756937052
      },
      {
        "name": "/usr/lib/jvm/java-17-amazon-corretto.x86_64/lib",
        "value": 188.0,
        "unit": "Megabytes",
        "time": 1768756937052
      }
    ]
  },
  "HadoopDataNode-Memory": {
    "name": "HadoopDataNode-Memory",
    "value": 2.0,
    "unit": "Percent",
    "time": 1768756940429
  },
  "Instance-Disk-Used-/dev": {
    "name": "Instance-Disk-Used-/dev",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756937051
  },
  "InstanceController-Reboots": {
    "name": "InstanceController-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756340430
  },
  "HadoopDataNode-Reboots": {
    "name": "HadoopDataNode-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756460409
  },
  "LogPusher-Total-Logfile": {
    "name": "LogPusher-Total-Logfile",
    "value": 111.0,
    "unit": "Count",
    "time": 1768756755921
  },
  "LogPusher-LastCycle-UploadedFiles": {
    "name": "LogPusher-LastCycle-UploadedFiles",
    "value": 48.0,
    "unit": "Count",
    "time": 1768756755921
  },
  "IC-TimeSinceHeartbeat": {
    "name": "IC-TimeSinceHeartbeat",
    "value": 12.0,
    "unit": "Seconds",
    "time": 1768756940227
  },
  "LogPusher-LastCycle-DataSize": {
    "name": "LogPusher-LastCycle-DataSize",
    "value": 133255.0,
    "unit": "Bytes",
    "time": 1768756755921
  },
  "Instance-CPU-CPUUtilization": {
    "name": "Instance-CPU-CPUUtilization",
    "value": 59.2,
    "unit": "Percent",
    "time": 1768756935228
  }
}

# Resource Manager and Name Node details
isMaster=$(grep isMaster /emr/instance-controller/lib/info/instance.json | grep true)
isHACluster=$(grep haEnabled /emr/instance-controller/lib/info/extraInstanceData.json | grep true)
if [ -n "$isMaster" ] && [ -n "$isHACluster" ]
then
  echo "============= Resource Manager status report ============="
  sudo -u hadoop yarn rmadmin -getAllServiceState
  echo "================ Name Node status report ================="
  sudo -u hadoop hdfs haadmin -getAllServiceState
fi
