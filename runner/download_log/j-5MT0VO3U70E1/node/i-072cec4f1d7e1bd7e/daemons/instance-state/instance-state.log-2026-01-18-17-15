OS is AL2023: /usr/bin/ruby
Sleeping for a random period of time up to 10 minutes
Sleeping for 29.607877744992408 seconds
Sun Jan 18 17:15:30 UTC 2026

# how long have we been up
uptime
 17:15:30 up 3 min,  0 users,  load average: 1.59, 1.23, 0.52

# whats running, with ASCII-art process hierarchy (forest)
if [ "$dumpType" == "full" ]
then
  ps auxwwwf
else
  ps auxf --width=200
fi
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           2  0.0  0.0      0     0 ?        S    17:12   0:00 [kthreadd]
root           3  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [rcu_gp]
root           4  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [rcu_par_gp]
root           5  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [slub_flushwq]
root           6  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [netns]
root           7  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/0:0-events]
root           8  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/0:0H-events_highpri]
root           9  0.1  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:0-events_unbound]
root          10  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [mm_percpu_wq]
root          11  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [rcu_tasks_kthread]
root          12  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [rcu_tasks_rude_kthread]
root          13  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [rcu_tasks_trace_kthread]
root          14  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [ksoftirqd/0]
root          15  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [rcu_preempt]
root          16  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [migration/0]
root          17  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/0:1-cgroup_release]
root          18  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [cpuhp/0]
root          19  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [cpuhp/1]
root          20  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [migration/1]
root          21  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [ksoftirqd/1]
root          22  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/1:0-cgroup_free]
root          23  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/1:0H-events_highpri]
root          24  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [cpuhp/2]
root          25  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [migration/2]
root          26  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [ksoftirqd/2]
root          27  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/2:0-mm_percpu_wq]
root          28  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/2:0H-events_highpri]
root          29  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [cpuhp/3]
root          30  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [migration/3]
root          31  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [ksoftirqd/3]
root          32  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/3:0-mm_percpu_wq]
root          33  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/3:0H-events_highpri]
root          35  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:1-xfs_iwalk-2526]
root          36  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:2-xfs_iwalk-2526]
root          37  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:3-writeback]
root          38  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [kdevtmpfs]
root          39  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [inet_frag_wq]
root          40  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [kauditd]
root          41  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [khungtaskd]
root          42  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [oom_reaper]
root          43  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [writeback]
root          44  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [kcompactd0]
root          45  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/2:1-cgroup_release]
root          46  0.0  0.0      0     0 ?        SN   17:12   0:00  \_ [khugepaged]
root          47  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [cryptd]
root          48  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kintegrityd]
root          49  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kblockd]
root          50  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [blkcg_punt_bio]
root          51  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/1:1-xfs-sync/nvme1n1p1]
root          52  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [tpm_dev_wq]
root          53  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [md]
root          54  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [edac-poller]
root          55  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [watchdogd]
root          59  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/2:1H-kblockd]
root          81  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [kswapd0]
root          88  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfsalloc]
root          89  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs_mru_cache]
root          91  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kthrotld]
root          95  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/3:1-rcu_gp]
root          96  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/3:2-cgroup_free]
root         144  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [nvme-wq]
root         146  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [nvme-reset-wq]
root         148  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [nvme-delete-wq]
root         154  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:4-xfs_iwalk-2526]
root         157  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:5-flush-259:2]
root         158  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:6-xfs_iwalk-2526]
root         161  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:7-flush-259:2]
root         162  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:8-xfs_iwalk-2526]
root         193  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:9-flush-259:2]
root         199  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [mld]
root         200  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [ipv6_addrconf]
root         201  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/3:1H-xfs-log/nvme1n1p1]
root         216  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kstrp]
root         228  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [zswap-shrink]
root         229  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/u9:0]
root         329  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/0:2-cgroup_bpf_destroy]
root         346  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/0:1H-kblockd]
root         397  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [kworker/1:1H-kblockd]
root         961  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/2:2-cgroup_release]
root         982  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/1:2-mm_percpu_wq]
root         989  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-buf/nvme0n1]
root         990  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-conv/nvme0n]
root         991  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-reclaim/nvm]
root         992  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-blockgc/nvm]
root         993  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-inodegc/nvm]
root         994  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-log/nvme0n1]
root         995  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-cil/nvme0n1]
root         996  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [xfsaild/nvme0n1p1]
root        1591  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/2:3-events]
root        1605  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/0:3-events]
root        1615  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [rpciod]
root        1616  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xprtiod]
root        1683  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [ena]
root        1845  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/1:3-xfs-sync/nvme1n1p2]
root        2337  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-buf/nvme1n1]
root        2338  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-conv/nvme1n]
root        2339  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-reclaim/nvm]
root        2340  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-blockgc/nvm]
root        2341  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-inodegc/nvm]
root        2344  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-log/nvme1n1]
root        2345  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-cil/nvme1n1]
root        2346  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [xfsaild/nvme1n1p1]
root        2425  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-buf/nvme1n1]
root        2426  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-conv/nvme1n]
root        2427  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-reclaim/nvm]
root        2429  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-blockgc/nvm]
root        2430  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-inodegc/nvm]
root        2433  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-log/nvme1n1]
root        2434  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-cil/nvme1n1]
root        2435  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [xfsaild/nvme1n1p2]
root        2480  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:10-flush-259:2]
root        2481  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:11-xfs_iwalk-2526]
root        2482  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:12-xfs_iwalk-2526]
root        2483  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:13-xfs_iwalk-2526]
root        2484  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:14-events_unbound]
root        2485  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:15-flush-259:2]
root        2486  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/u8:16]
root        2528  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-buf/nvme2n1]
root        2529  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-conv/nvme2n]
root        2530  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-reclaim/nvm]
root        2531  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-blockgc/nvm]
root        2532  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-inodegc/nvm]
root        2536  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-log/nvme2n1]
root        2537  0.0  0.0      0     0 ?        I<   17:12   0:00  \_ [xfs-cil/nvme2n1]
root        2538  0.0  0.0      0     0 ?        S    17:12   0:00  \_ [xfsaild/nvme2n1]
root        3848  0.0  0.0      0     0 ?        I    17:12   0:00  \_ [kworker/2:4-cgroup_release]
root           1  4.2  0.1 173220 18140 ?        Ss   17:12   0:08 /usr/lib/systemd/systemd --switched-root --system --deserialize=32
root        1041  0.2  0.1  44576 18380 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-journald
systemd+    1613  0.0  0.0  22600 15032 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-resolved
root        1614  0.0  0.0  32028 11604 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-udevd
root        1618  0.0  0.0  21184  2244 ?        S<sl 17:12   0:00 /sbin/auditd
dbus        1790  0.0  0.0   8500  4112 ?        Ss   17:12   0:00 /usr/bin/dbus-broker-launch --scope system --audit
dbus        1791  0.3  0.0   5644  3396 ?        S    17:12   0:00  \_ dbus-broker --log 4 --controller 9 --machine-id ec276fc410ae8f3bf6c5605dc1bcdbc7 --max-bytes 536870912 --max-fds 4096 --max-matches 16384 --audit
root        1792  0.0  0.0  16352  6304 ?        Ss   17:12   0:00 /usr/bin/systemd-inhibit --what=handle-suspend-key:handle-hibernate-key --who=noah --why=acpid instead --mode=block /usr/sbin/acpid -f
root        1832  0.0  0.0   2684  1136 ?        S    17:12   0:00  \_ /usr/sbin/acpid -f
root        1795  0.0  0.0  81420  1572 ?        Ssl  17:12   0:00 /usr/sbin/irqbalance --foreground
libstor+    1796  0.0  0.0   2772  1980 ?        Ss   17:12   0:00 /usr/bin/lsmd -d
rtkit       1799  0.0  0.0 155932  2628 ?        SNsl 17:12   0:00 /usr/libexec/rtkit-daemon
root        1804  0.0  0.0  16872  8020 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-homed
root        1805  0.2  0.0  19456 11360 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-logind
root        1806  0.0  0.0 531916  6560 ?        Ssl  17:12   0:00 /usr/libexec/upowerd
systemd+    1846  0.0  0.0 236944  9992 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-networkd
polkitd     1848  0.0  0.0 314204  7348 ?        Ssl  17:12   0:00 /usr/lib/polkit-1/polkitd --no-debug --log-level=err
root        1867  0.0  0.0 281944  3736 ?        Ssl  17:12   0:00 /usr/sbin/gssproxy -D
root        3818  0.0  0.1 1240692 20880 ?       Ssl  17:12   0:00 /usr/bin/amazon-ssm-agent
root        3827  0.0  0.0  14376  7912 ?        Ss   17:12   0:00 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups
root        3844  0.0  0.0   4764  2612 ?        Ss   17:12   0:00 /usr/sbin/atd -f
root        3849  0.0  0.0 224432  3648 ?        Ss   17:12   0:00 /usr/sbin/crond -n
root       11692  0.0  0.0 224432  2480 ?        S    17:15   0:00  \_ /usr/sbin/CROND -n
root       11693  0.0  0.0 222964  3356 ?        Ss   17:15   0:00      \_ /bin/sh -c timeout -s SIGKILL 2h /usr/bin/dump-instance-state full 10 > /emr/instance-state/instance-state.log-`date +%Y-%m-%d-%H-%M` 2>&1
root       11694  0.0  0.0 221380  1008 ?        S    17:15   0:00          \_ timeout -s SIGKILL 2h /usr/bin/dump-instance-state full 10
root       11696  0.0  0.0 222964  3484 ?        S    17:15   0:00              \_ /usr/bin/bash /usr/bin/dump-instance-state full 10
root       11936  0.0  0.0 223932  3328 ?        R    17:15   0:00                  \_ ps auxwwwf
root        3850  0.0  0.0 221360  1080 tty1     Ss+  17:12   0:00 /sbin/agetty -o -p -- \u --noclear - linux
root        3851  0.0  0.0 221404  1076 ttyS0    Ss+  17:12   0:00 /sbin/agetty -o -p -- \u --keep-baud 115200,57600,38400,9600 - vt220
chrony      3859  0.0  0.0  86452  3948 ?        S    17:12   0:00 /usr/sbin/chronyd -F 2
root        4137  8.0  2.4 4966596 390888 ?      Sl   17:12   0:14 /usr/lib/jvm/jre-17/bin/java -Xmx1024m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/logpusher/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.logpusher.Main /etc/logpusher/logpusher.properties
root        4164  6.3  2.4 5541364 391008 ?      Sl   17:12   0:11 /usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main
root        4205  0.0  0.0  16352  6352 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-userdbd
root        4207  0.0  0.0  17108  7540 ?        S    17:12   0:00  \_ systemd-userwork: waiting...
root        4208  0.0  0.0  17104  7568 ?        S    17:12   0:00  \_ systemd-userwork: waiting...
root        4209  0.0  0.0  16980  7644 ?        S    17:12   0:00  \_ systemd-userwork: waiting...
root        4224  0.0  0.0  22180 14304 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd --user
root        4226  0.0  0.0 174312  7144 ?        S    17:12   0:00  \_ (sd-pam)
hadoop      4250 18.4  3.1 5102528 516532 ?      Sl   17:12   0:32 /usr/lib/jvm/jre-17/bin/java -Djava.security.properties=/emr/instance-controller/lib/security.properties -Xmx1024m -Djute.maxbuffer=3145728 -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/instance-controller/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.instancecontroller.Main
hadoop     11835  211  0.0      0     0 ?        Zl   17:15   0:04  \_ [java] <defunct>
root        8067  0.0  0.0  18612 11384 ?        Ss   17:13   0:00 /usr/sbin/httpd -k start -DFOREGROUND
apache      8070  0.0  0.0  18268  3776 ?        S    17:13   0:00  \_ /usr/sbin/httpd -k start -DFOREGROUND
apache      8071  0.0  0.0 2561120 7620 ?        Sl   17:13   0:00  \_ /usr/sbin/httpd -k start -DFOREGROUND
apache      8073  0.0  0.0 2331680 7620 ?        Sl   17:13   0:00  \_ /usr/sbin/httpd -k start -DFOREGROUND
apache      8103  0.0  0.0 2331680 7664 ?        Sl   17:13   0:00  \_ /usr/sbin/httpd -k start -DFOREGROUND
root        8345  0.0  0.0  16912  1864 ?        Ss   17:13   0:00 nginx: master process /usr/sbin/nginx
nginx       8346  0.0  0.0  17340  3592 ?        S    17:13   0:00  \_ nginx: worker process
hdfs        8931  8.6  2.4 4074520 395924 ?      Sl   17:13   0:09 /usr/lib/jvm/jre-17/bin/java -Dproc_namenode -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dhdfs.audit.logger=INFO,NullAppender -Dhadoop.security.logger=INFO,DRFAS -Dyarn.log.dir=/var/log/hadoop-hdfs -Dyarn.log.file=hadoop-hdfs-namenode-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx1843m -Dhadoop.log.dir=/var/log/hadoop-hdfs -Dhadoop.log.file=hadoop-hdfs-namenode-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hdfs -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dsun.net.inetaddr.ttl=3600 org.apache.hadoop.hdfs.server.namenode.NameNode
yarn        9564 10.5  2.4 6245892 391840 ?      Sl   17:13   0:10 /usr/lib/jvm/jre-17/bin/java -Dproc_timelineserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer
mapred      9801 12.4  2.5 4621528 410080 ?      Sl   17:13   0:11 /usr/lib/jvm/jre-17/bin/java -Dproc_historyserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dmapred.jobsummary.logger=INFO,DRFA -Dyarn.log.dir=/var/log/hadoop-mapreduce -Dyarn.log.file=hadoop-mapred-historyserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-mapreduce -Dhadoop.log.file=hadoop-mapred-historyserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=mapred -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender -Dsun.net.inetaddr.ttl=30 org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer
yarn        9962  5.8  1.4 4590348 231140 ?      Sl   17:13   0:05 /usr/lib/jvm/jre-17/bin/java -Dproc_proxyserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-proxyserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-proxyserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.webproxy.WebAppProxyServer
yarn       10202 21.6  2.4 4852740 400636 ?      Sl   17:14   0:19 /usr/lib/jvm/jre-17/bin/java -Dproc_resourcemanager -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dservice.libdir=/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-resourcemanager-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-resourcemanager-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.resourcemanager.ResourceManager
kms        10859  9.5  1.1 6219404 181844 ?      Sl   17:14   0:07 /usr/lib/jvm/jre-17/bin/java -Dproc_kms -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dkms.config.dir=/etc/hadoop-kms/conf -Dkms.log.dir=/var/log/hadoop-kms -Dlog4j.configuration=file:/etc/hadoop-kms/conf/kms-log4j.properties -Dyarn.log.dir=/var/log/hadoop-kms -Dyarn.log.file=hadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/var/log/hadoop-kms -Dhadoop.log.file=hadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=kms -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender -Dsun.net.inetaddr.ttl=30 org.apache.hadoop.crypto.key.kms.server.KMSWebServer
root       11348  5.2  1.1 4705152 190964 ?      Sl   17:14   0:03 /usr/lib/jvm/java-1.8.0-amazon-corretto.x86_64/bin/java -Xmx1024m -Xms300m -XX:OnOutOfMemoryError=kill -9 %p -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/emr-metrics-collector/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride emr.metricscollector.Main
root       11841  2.0  0.0  18148  8596 ?        Ss   17:15   0:00 /usr/lib/systemd/systemd-hostnamed

# Top CPU users
ps auxwww --sort -%cpu | head -20
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
yarn       10202 21.6  2.4 4852740 400636 ?      Sl   17:14   0:19 /usr/lib/jvm/jre-17/bin/java -Dproc_resourcemanager -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dservice.libdir=/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-resourcemanager-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-resourcemanager-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.resourcemanager.ResourceManager
hadoop      4250 18.4  3.1 5102528 516532 ?      Sl   17:12   0:32 /usr/lib/jvm/jre-17/bin/java -Djava.security.properties=/emr/instance-controller/lib/security.properties -Xmx1024m -Djute.maxbuffer=3145728 -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/instance-controller/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.instancecontroller.Main
mapred      9801 12.4  2.5 4621528 410080 ?      Sl   17:13   0:11 /usr/lib/jvm/jre-17/bin/java -Dproc_historyserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dmapred.jobsummary.logger=INFO,DRFA -Dyarn.log.dir=/var/log/hadoop-mapreduce -Dyarn.log.file=hadoop-mapred-historyserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-mapreduce -Dhadoop.log.file=hadoop-mapred-historyserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=mapred -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender -Dsun.net.inetaddr.ttl=30 org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer
yarn        9564 10.5  2.4 6245892 391840 ?      Sl   17:13   0:10 /usr/lib/jvm/jre-17/bin/java -Dproc_timelineserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer
kms        10859  9.5  1.1 6219404 181844 ?      Sl   17:14   0:07 /usr/lib/jvm/jre-17/bin/java -Dproc_kms -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dkms.config.dir=/etc/hadoop-kms/conf -Dkms.log.dir=/var/log/hadoop-kms -Dlog4j.configuration=file:/etc/hadoop-kms/conf/kms-log4j.properties -Dyarn.log.dir=/var/log/hadoop-kms -Dyarn.log.file=hadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/var/log/hadoop-kms -Dhadoop.log.file=hadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=kms -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender -Dsun.net.inetaddr.ttl=30 org.apache.hadoop.crypto.key.kms.server.KMSWebServer
hdfs        8931  8.6  2.4 4074520 395924 ?      Sl   17:13   0:09 /usr/lib/jvm/jre-17/bin/java -Dproc_namenode -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dhdfs.audit.logger=INFO,NullAppender -Dhadoop.security.logger=INFO,DRFAS -Dyarn.log.dir=/var/log/hadoop-hdfs -Dyarn.log.file=hadoop-hdfs-namenode-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx1843m -Dhadoop.log.dir=/var/log/hadoop-hdfs -Dhadoop.log.file=hadoop-hdfs-namenode-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hdfs -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dsun.net.inetaddr.ttl=3600 org.apache.hadoop.hdfs.server.namenode.NameNode
root        4137  8.0  2.4 4966596 390888 ?      Sl   17:12   0:14 /usr/lib/jvm/jre-17/bin/java -Xmx1024m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/logpusher/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.logpusher.Main /etc/logpusher/logpusher.properties
root        4164  6.3  2.4 5541364 391008 ?      Sl   17:12   0:11 /usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main
yarn        9962  5.8  1.4 4590348 231140 ?      Sl   17:13   0:05 /usr/lib/jvm/jre-17/bin/java -Dproc_proxyserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-proxyserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-proxyserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.webproxy.WebAppProxyServer
root       11348  5.2  1.1 4705152 190964 ?      Sl   17:14   0:03 /usr/lib/jvm/java-1.8.0-amazon-corretto.x86_64/bin/java -Xmx1024m -Xms300m -XX:OnOutOfMemoryError=kill -9 %p -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/emr-metrics-collector/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride emr.metricscollector.Main
root           1  4.2  0.1 173220 18140 ?        Ss   17:12   0:08 /usr/lib/systemd/systemd --switched-root --system --deserialize=32
root       11841  2.0  0.0  18148  8596 ?        Ss   17:15   0:00 /usr/lib/systemd/systemd-hostnamed
dbus        1791  0.3  0.0   5644  3396 ?        S    17:12   0:00 dbus-broker --log 4 --controller 9 --machine-id ec276fc410ae8f3bf6c5605dc1bcdbc7 --max-bytes 536870912 --max-fds 4096 --max-matches 16384 --audit
root        1041  0.2  0.1  44576 18380 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-journald
root        1805  0.2  0.0  19456 11360 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-logind
root           9  0.1  0.0      0     0 ?        I    17:12   0:00 [kworker/u8:0-events_unbound]
root           2  0.0  0.0      0     0 ?        S    17:12   0:00 [kthreadd]
root           3  0.0  0.0      0     0 ?        I<   17:12   0:00 [rcu_gp]
root           4  0.0  0.0      0     0 ?        I<   17:12   0:00 [rcu_par_gp]

# Top memory users
ps auxwww --sort -rss | head -20
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
hadoop      4250 18.4  3.1 5102528 516532 ?      Sl   17:12   0:32 /usr/lib/jvm/jre-17/bin/java -Djava.security.properties=/emr/instance-controller/lib/security.properties -Xmx1024m -Djute.maxbuffer=3145728 -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/instance-controller/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.instancecontroller.Main
mapred      9801 12.4  2.5 4621528 410080 ?      Sl   17:13   0:11 /usr/lib/jvm/jre-17/bin/java -Dproc_historyserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dmapred.jobsummary.logger=INFO,DRFA -Dyarn.log.dir=/var/log/hadoop-mapreduce -Dyarn.log.file=hadoop-mapred-historyserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-mapreduce -Dhadoop.log.file=hadoop-mapred-historyserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=mapred -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender -Dsun.net.inetaddr.ttl=30 org.apache.hadoop.mapreduce.v2.hs.JobHistoryServer
yarn       10202 21.6  2.4 4852740 400636 ?      Sl   17:14   0:19 /usr/lib/jvm/jre-17/bin/java -Dproc_resourcemanager -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dservice.libdir=/usr/lib/hadoop-yarn/./,/usr/lib/hadoop-yarn/lib,/usr/lib/hadoop-hdfs/./,/usr/lib/hadoop-hdfs/lib,/usr/lib/hadoop/./,/usr/lib/hadoop/lib -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-resourcemanager-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-resourcemanager-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.resourcemanager.ResourceManager
hdfs        8931  8.6  2.4 4074520 395924 ?      Sl   17:13   0:09 /usr/lib/jvm/jre-17/bin/java -Dproc_namenode -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dhdfs.audit.logger=INFO,NullAppender -Dhadoop.security.logger=INFO,DRFAS -Dyarn.log.dir=/var/log/hadoop-hdfs -Dyarn.log.file=hadoop-hdfs-namenode-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx1843m -Dhadoop.log.dir=/var/log/hadoop-hdfs -Dhadoop.log.file=hadoop-hdfs-namenode-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=hdfs -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dsun.net.inetaddr.ttl=3600 org.apache.hadoop.hdfs.server.namenode.NameNode
yarn        9564 10.5  2.4 6245892 391840 ?      Sl   17:13   0:10 /usr/lib/jvm/jre-17/bin/java -Dproc_timelineserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer
root        4164  6.3  2.4 5541364 391008 ?      Sl   17:12   0:11 /usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main
root        4137  8.0  2.4 4966596 390888 ?      Sl   17:12   0:14 /usr/lib/jvm/jre-17/bin/java -Xmx1024m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/instance-controller/lib/*:/home/hadoop/conf:/usr/share/aws/aws-java-sdk-v2/* -Dlog4j2.configurationFile=file:/etc/logpusher/log4j2.xml -Dlog4j2.formatMsgNoLookups=true -Dlog4j2.disable.jmx=true aws157.logpusher.Main /etc/logpusher/logpusher.properties
yarn        9962  5.8  1.4 4590348 231140 ?      Sl   17:13   0:05 /usr/lib/jvm/jre-17/bin/java -Dproc_proxyserver -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl=30 -Dyarn.log.dir=/var/log/hadoop-yarn -Dyarn.log.file=hadoop-yarn-proxyserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Xmx2416m -Dhadoop.log.dir=/var/log/hadoop-yarn -Dhadoop.log.file=hadoop-yarn-proxyserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=yarn -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.yarn.server.webproxy.WebAppProxyServer
root       11348  5.2  1.1 4705152 190964 ?      Sl   17:14   0:03 /usr/lib/jvm/java-1.8.0-amazon-corretto.x86_64/bin/java -Xmx1024m -Xms300m -XX:OnOutOfMemoryError=kill -9 %p -XX:MinHeapFreeRatio=10 -server -cp /usr/share/aws/emr/emr-metrics-collector/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride emr.metricscollector.Main
kms        10859  9.5  1.1 6219404 181844 ?      Sl   17:14   0:07 /usr/lib/jvm/jre-17/bin/java -Dproc_kms -Djava.net.preferIPv4Stack=true -server -XX:+ExitOnOutOfMemoryError --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.base/sun.security.x509=ALL-UNNAMED --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.math=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util.regex=ALL-UNNAMED --add-opens=java.base/jdk.internal=ALL-UNNAMED --add-opens=java.base/jdk.internal.ref=ALL-UNNAMED --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED --add-opens=java.sql/java.sql=ALL-UNNAMED --add-opens=java.base/jdk.internal.util=ALL-UNNAMED --add-opens=java.base/jdk.internal.util.random=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED -Dkms.config.dir=/etc/hadoop-kms/conf -Dkms.log.dir=/var/log/hadoop-kms -Dlog4j.configuration=file:/etc/hadoop-kms/conf/kms-log4j.properties -Dyarn.log.dir=/var/log/hadoop-kms -Dyarn.log.file=hadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir=/usr/lib/hadoop-yarn -Dyarn.root.logger=INFO,console -Djava.library.path=/usr/lib/hadoop/lib/native -Dhadoop.log.dir=/var/log/hadoop-kms -Dhadoop.log.file=hadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir=/usr/lib/hadoop -Dhadoop.id.str=kms -Dhadoop.root.logger=INFO,DRFA -Dhadoop.policy.file=hadoop-policy.xml -Dhadoop.security.logger=INFO,NullAppender -Dsun.net.inetaddr.ttl=30 org.apache.hadoop.crypto.key.kms.server.KMSWebServer
root        3818  0.0  0.1 1240692 20880 ?       Ssl  17:12   0:00 /usr/bin/amazon-ssm-agent
root        1041  0.2  0.1  44576 18380 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-journald
root           1  4.2  0.1 173220 18140 ?        Ss   17:12   0:08 /usr/lib/systemd/systemd --switched-root --system --deserialize=32
systemd+    1613  0.0  0.0  22600 15032 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-resolved
root        4224  0.0  0.0  22180 14304 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd --user
root        1614  0.0  0.0  32028 11604 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-udevd
root        8067  0.0  0.0  18612 11384 ?        Ss   17:13   0:00 /usr/sbin/httpd -k start -DFOREGROUND
root        1805  0.2  0.0  19456 11360 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-logind
systemd+    1846  0.0  0.0 236944  9992 ?        Ss   17:12   0:00 /usr/lib/systemd/systemd-networkd

# hows the kernel looking
dmesg | tail -n 25
[   83.613265] zram_generator::config[8061]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   83.975724] zram_generator::config[8268]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   84.222568] zram_generator::config[8294]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   84.844044] zram_generator::config[8337]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   85.241949] zram_generator::config[8369]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   85.485377] zram_generator::config[8394]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   91.071299] zram_generator::config[8895]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   93.509416] zram_generator::config[9012]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[   94.005658] zram_generator::config[9048]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  100.590210] zram_generator::config[9528]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  103.080007] zram_generator::config[9625]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  103.475174] zram_generator::config[9692]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  103.936251] zram_generator::config[9751]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  106.439980] zram_generator::config[9862]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  106.865524] zram_generator::config[9888]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  107.305230] zram_generator::config[9924]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  109.892370] zram_generator::config[10045]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  110.323781] zram_generator::config[10089]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  111.125319] zram_generator::config[10164]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  113.623389] zram_generator::config[10260]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  113.995268] zram_generator::config[10290]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  117.156985] zram_generator::config[10685]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  119.804140] zram_generator::config[10932]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  120.215270] zram_generator::config[10957]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.
[  133.009881] zram_generator::config[11304]: zram0: system has too much memory (15779MB), limit is 800MB, ignoring.

# dump instance controller log
tail -n 100 /emr/instance-controller/log/instance-controller.log
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at java.base/java.lang.Thread.run(Thread.java:840) [?:?]
2026-01-18 17:15:23,985 INFO ex-rpc-318: Using instance own hostname for RM: 172.31.39.66
2026-01-18 17:15:23,986 INFO ex-rpc-318: ClusterConfigurationUpdateHandler Calling metricscollector setConfig retentionPeriod: 0 collectorFrequency: 0 getCloudwatchDataFromMetricCollector: false retentionPeriodForInstanceMetrics: 0 collectorFrequencyForInstanceMetrics: 0 collectorFrequencyForYarnRM: 0 collectorFrequencyForHDFS: 0 collectorFrequencyForPresto: 0 collectorFrequencyForSparkShuffle: 0 retentionPeriodForSparkShuffle: 0 targetURL: wss://2zd2r7qjq5.execute-api.us-east-1.amazonaws.com/prod authToken: **** tokenExpirationTime: 0 publisherFrequency: 0 publisherFrequencyForInstanceMetricsOnLeader: 0 publisherFrequencyForInstanceMetricsOnWorker: 0 publisherFrequencyForSparkShuffle: 0 resizeExecutorFrequency: 0 emrClusterID: j-5MT0VO3U70E1 accountID: 416772876438 cellID: cellId01 stage: prod region: us-east-1 List of metrics:  enableHttpProxyMessageHandler: true httpProxyMessageProcessThreadPoolSize: 10 httpProxyMessageProcessThreadSleepInMillis: 5 httpProxyResponseMessageContentMaxSizeInBytes: 30720 proxyConnectionTimeoutInMillis: 20000 apiGatewayPingPongStartInitialDelayInSeconds: 30 apiGatewayPingPongSchedulePeriodInSeconds: 30
2026-01-18 17:15:23,995 INFO ex-rpc-318: ClusterConfigurationUpdateHandler Successfully called metricscollector setConfig
2026-01-18 17:15:23,995 INFO ex-rpc-318: Received configureMaster from 15.221.163.9
2026-01-18 17:15:24,009 WARN ex-rpc-336: clusterConfiguration.getInstanceGroupConfigList() is empty!
2026-01-18 17:15:24,009 INFO ex-rpc-336: GetStatus: Got request with StepMarkerId: 
2026-01-18 17:15:24,010 INFO ex-rpc-336: LIS 0 doShutdown:false lss:COMPLETED duration:156083 lba:0 provision: SUCCESSFUL, provisionFailureReason: NONE
2026-01-18 17:15:24,010 INFO ex-rpc-336: getStatus - updateLocalInstanceLatest took 0ms
2026-01-18 17:15:24,010 INFO ex-rpc-336: LIS 0 doShutdown:false lss:COMPLETED duration:156083 lba:0 provision: SUCCESSFUL, provisionFailureReason: NONE
2026-01-18 17:15:24,010 INFO ex-rpc-336: getStatus - addRemoteInstanceStatusToGetStatusResponse took 0ms
2026-01-18 17:15:24,010 INFO ex-rpc-336: getStatus - addAllAppStatusRecord took 0ms
2026-01-18 17:15:24,010 INFO ex-rpc-336: Touching heartbeat file: uplink
2026-01-18 17:15:24,010 INFO ex-rpc-336: Received getStatus from 15.221.163.26
2026-01-18 17:15:24,706 INFO arpc-236: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:15:25,819 INFO YarnApplicationStepUpdater-1: I/O exception (org.apache.http.conn.HttpHostConnectException) caught when processing request to {}->http://172.31.39.66:8088: Connect to 172.31.39.66:8088 [/172.31.39.66] failed: Connection refused
2026-01-18 17:15:25,819 INFO YarnApplicationStepUpdater-1: Retrying request to {}->http://172.31.39.66:8088
2026-01-18 17:15:25,824 INFO YarnApplicationStepUpdater-1: SecurityConfiguration is empty, returning InTransitEncryption not enabled
2026-01-18 17:15:25,824 INFO YarnApplicationStepUpdater-1: GET request for http://172.31.39.66:8088/ws/v1/cluster/apps?states=FINISHED,FAILED,KILLED&finishedTimeBegin=1768752925824&finishedTimeEnd=1768756525824
2026-01-18 17:15:25,827 INFO YarnApplicationStepUpdater-1: Found 0 running and 0 completed YARN applications
2026-01-18 17:15:25,832 INFO YarnApplicationStepUpdater-1: No YARN applications found to process
2026-01-18 17:15:26,979 INFO arpc-86: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:15:28,196 INFO ex-rpc-291: Invoking MetricsCollectorManager from ConfigureMasterRequest
2026-01-18 17:15:28,196 INFO ex-rpc-291: Managed Resize flag is enabled
2026-01-18 17:15:28,283 INFO ex-rpc-291: Metrics Collector is running: true
2026-01-18 17:15:28,285 INFO ex-rpc-291: Parsing ComponentConfigurations.
2026-01-18 17:15:28,285 INFO ex-rpc-291: Initializing Hadoop configurations
2026-01-18 17:15:28,286 INFO ex-rpc-291: ResourceManagerHostnames already populated, updating yarn-site
2026-01-18 17:15:28,286 INFO ex-rpc-291: hadoopConfDir /etc/hadoop/conf/
2026-01-18 17:15:28,286 INFO ex-rpc-291: Apps installed [HDFS, YARN]
2026-01-18 17:15:28,286 INFO ex-rpc-291: Kerberos classification not found, it is not a Kerberos cluster.
2026-01-18 17:15:28,286 INFO ex-rpc-291: It is not an external KDC cluster, not setting KerberosReadyToShutDown in common instance record.
2026-01-18 17:15:28,286 INFO ex-rpc-291: Not Starting Kerberos Refresher, since its not a kerberized cluster
2026-01-18 17:15:28,286 INFO ex-rpc-291: Already started delete kerberos principals thread
2026-01-18 17:15:28,287 INFO ex-rpc-291: Received ManagedResize Configuration: retentionPeriod: 0 collectorFrequency: 0 getCloudwatchDataFromMetricCollector: false retentionPeriodForInstanceMetrics: 0 collectorFrequencyForInstanceMetrics: 0 collectorFrequencyForYarnRM: 0 collectorFrequencyForHDFS: 0 collectorFrequencyForPresto: 0 collectorFrequencyForSparkShuffle: 0 retentionPeriodForSparkShuffle: 0 targetURL: wss://2zd2r7qjq5.execute-api.us-east-1.amazonaws.com/prod authToken: **** tokenExpirationTime: 0 publisherFrequency: 0 publisherFrequencyForInstanceMetricsOnLeader: 0 publisherFrequencyForInstanceMetricsOnWorker: 0 publisherFrequencyForSparkShuffle: 0 resizeExecutorFrequency: 0 emrClusterID: j-5MT0VO3U70E1 accountID: 416772876438 cellID: cellId01 stage: prod region: us-east-1 List of metrics:  enableHttpProxyMessageHandler: true httpProxyMessageProcessThreadPoolSize: 10 httpProxyMessageProcessThreadSleepInMillis: 5 httpProxyResponseMessageContentMaxSizeInBytes: 30720 proxyConnectionTimeoutInMillis: 20000 apiGatewayPingPongStartInitialDelayInSeconds: 30 apiGatewayPingPongSchedulePeriodInSeconds: 30 
2026-01-18 17:15:28,287 INFO ex-rpc-291: Updating ManagedResizeConfiguration in singleton.
2026-01-18 17:15:28,287 INFO ex-rpc-291: CollectorPropertiesFrequency was: 0, is going to be 0. InstanceMetricsCollectorFreq was: 0, is going to be 0
2026-01-18 17:15:28,287 INFO ex-rpc-291: CollectorPropertiesFrequency after update is now: 0. InstanceMetricsCollectorFreq after update is now: 0
2026-01-18 17:15:28,287 WARN ex-rpc-291: Unable to find Resource Manager master node. Will retry in next PRJF ...
java.lang.Exception: Candidates is null
	at aws157.instancecontroller.util.ResourceManagerHelper.getPrivateIpForRmHost(ResourceManagerHelper.java:43) ~[instance-controller-1.85.0.jar:1.85.0]
	at aws157.instancecontroller.config.ClusterConfigurationUpdateHandler.handle(ClusterConfigurationUpdateHandler.java:131) ~[instance-controller-1.85.0.jar:1.85.0]
	at aws157.instancecontroller.master.server.ConfigureMasterActivity.configureMaster(ConfigureMasterActivity.java:44) ~[instance-controller-1.85.0.jar:1.85.0]
	at aws157.instancecontroller.master.server.SharedServiceImpl.configureMasterSharedServiceImpl(SharedServiceImpl.java:118) ~[instance-controller-1.85.0.jar:1.85.0]
	at aws157.instancecontroller.master.server.InstanceControllerExternalServiceImpl.configureMaster(InstanceControllerExternalServiceImpl.java:224) ~[instance-controller-1.85.0.jar:1.85.0]
	at aws157.instancecontroller.InstanceControllerProtos$InstanceControllerExternalService.callMethod(InstanceControllerProtos.java) ~[instance-controller-interface-1.74.0.jar:1.85.0]
	at aws157.instancecontroller.master.server.MutualRpcServlet.doPut(MutualRpcServlet.java:61) ~[instance-controller-1.85.0.jar:1.85.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:710) ~[javax.servlet-api-3.1.0.jar:3.1.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:554) ~[jetty-servlet-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:190) ~[jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.Server.handle(Server.java:516) ~[jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:487) ~[jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) [jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:479) [jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277) [jetty-server-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.onFillable(SslConnection.java:555) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:410) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.ssl.SslConnection$2.succeeded(SslConnection.java:164) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) [jetty-io-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) [jetty-util-9.4.58.v20250814.jar:9.4.58.v20250814]
	at java.base/java.lang.Thread.run(Thread.java:840) [?:?]
2026-01-18 17:15:28,287 INFO ex-rpc-291: Using instance own hostname for RM: 172.31.39.66
2026-01-18 17:15:28,288 INFO ex-rpc-291: ClusterConfigurationUpdateHandler Calling metricscollector setConfig retentionPeriod: 0 collectorFrequency: 0 getCloudwatchDataFromMetricCollector: false retentionPeriodForInstanceMetrics: 0 collectorFrequencyForInstanceMetrics: 0 collectorFrequencyForYarnRM: 0 collectorFrequencyForHDFS: 0 collectorFrequencyForPresto: 0 collectorFrequencyForSparkShuffle: 0 retentionPeriodForSparkShuffle: 0 targetURL: wss://2zd2r7qjq5.execute-api.us-east-1.amazonaws.com/prod authToken: **** tokenExpirationTime: 0 publisherFrequency: 0 publisherFrequencyForInstanceMetricsOnLeader: 0 publisherFrequencyForInstanceMetricsOnWorker: 0 publisherFrequencyForSparkShuffle: 0 resizeExecutorFrequency: 0 emrClusterID: j-5MT0VO3U70E1 accountID: 416772876438 cellID: cellId01 stage: prod region: us-east-1 List of metrics:  enableHttpProxyMessageHandler: true httpProxyMessageProcessThreadPoolSize: 10 httpProxyMessageProcessThreadSleepInMillis: 5 httpProxyResponseMessageContentMaxSizeInBytes: 30720 proxyConnectionTimeoutInMillis: 20000 apiGatewayPingPongStartInitialDelayInSeconds: 30 apiGatewayPingPongSchedulePeriodInSeconds: 30
2026-01-18 17:15:28,296 INFO ex-rpc-291: ClusterConfigurationUpdateHandler Successfully called metricscollector setConfig
2026-01-18 17:15:28,296 INFO ex-rpc-291: Received configureMaster from 15.221.163.10
2026-01-18 17:15:28,309 WARN ex-rpc-291: clusterConfiguration.getInstanceGroupConfigList() is empty!
2026-01-18 17:15:28,309 INFO ex-rpc-291: GetStatus: Got request with StepMarkerId: 
2026-01-18 17:15:28,310 INFO ex-rpc-291: LIS 0 doShutdown:false lss:COMPLETED duration:160383 lba:0 provision: SUCCESSFUL, provisionFailureReason: NONE
2026-01-18 17:15:28,310 INFO ex-rpc-291: getStatus - updateLocalInstanceLatest took 0ms
2026-01-18 17:15:28,310 INFO ex-rpc-291: LIS 0 doShutdown:false lss:COMPLETED duration:160383 lba:0 provision: SUCCESSFUL, provisionFailureReason: NONE
2026-01-18 17:15:28,310 INFO ex-rpc-291: getStatus - addRemoteInstanceStatusToGetStatusResponse took 0ms
2026-01-18 17:15:28,310 INFO ex-rpc-291: getStatus - addAllAppStatusRecord took 0ms
2026-01-18 17:15:28,310 INFO ex-rpc-291: Touching heartbeat file: uplink
2026-01-18 17:15:28,310 INFO ex-rpc-291: Received getStatus from 15.221.163.10
2026-01-18 17:15:28,773 INFO AppPoller-Bg-Thread-3: Starting Command: [bash -l -c hdfs dfsadmin -report]
2026-01-18 17:15:29,715 INFO arpc-206: Updating local logpusher decommissioning state as a result of /getStatus rpc call before: false, after: false
2026-01-18 17:15:30,678 DEBUG steps-cancelling-service-bg-thread: Initiated Cancelling of Steps. Found 0 candidiate steps to be cancelled.
2026-01-18 17:15:30,832 INFO YarnApplicationStepUpdater-1: starts running
2026-01-18 17:15:30,832 INFO YarnApplicationStepUpdater-1: SecurityConfiguration is empty, returning InTransitEncryption not enabled
2026-01-18 17:15:30,832 INFO YarnApplicationStepUpdater-1: GET request for http://172.31.39.66:8088/ws/v1/cluster/apps?states=RUNNING
2026-01-18 17:15:30,836 INFO YarnApplicationStepUpdater-1: SecurityConfiguration is empty, returning InTransitEncryption not enabled
2026-01-18 17:15:30,836 INFO YarnApplicationStepUpdater-1: GET request for http://172.31.39.66:8088/ws/v1/cluster/apps?states=FINISHED,FAILED,KILLED&finishedTimeBegin=1768752930836&finishedTimeEnd=1768756530836
2026-01-18 17:15:30,840 INFO YarnApplicationStepUpdater-1: Found 0 running and 0 completed YARN applications
2026-01-18 17:15:30,840 INFO YarnApplicationStepUpdater-1: No YARN applications found to process

# dump instance controller stdout
tail -n 100 /emr/instance-controller/log/instance-controller.out
tail: cannot open '/emr/instance-controller/log/instance-controller.out' for reading: No such file or directory

# dump log pusher log
tail -n 100 /emr/logpusher/log/logpusher.log
2026-01-18 17:13:46,307 INFO logspusher-9: From 0 to 2914 of /emr/instance-state/libinstance-controller.log-2026-01-18-17-12 is compressed
2026-01-18 17:13:46,307 INFO logspusher-9: Compressed /emr/instance-state/libinstance-controller.log-2026-01-18-17-12 2914:829 ratio:3.5150784077201447
2026-01-18 17:13:46,307 INFO logspusher-9: Finished compressing file libinstance-controller.log-2026-01-18-17-12.gz with time: 14 milliseconds
2026-01-18 17:13:46,307 INFO logspusher-9: uploading libinstance-controller.log-2026-01-18-17-12.gz using putObject, file length 829
2026-01-18 17:13:46,307 INFO logspusher-9: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,309 INFO logspusher-4: From 0 to 8733 of /emr/setup-devices/setup_var_cache_dir.2026-01-18-17-12-18.log is compressed
2026-01-18 17:13:46,310 INFO logspusher-4: Compressed /emr/setup-devices/setup_var_cache_dir.2026-01-18-17-12-18.log 8733:1520 ratio:5.745394736842106
2026-01-18 17:13:46,310 INFO logspusher-4: Finished compressing file setup_var_cache_dir.2026-01-18-17-12-18.log.gz with time: 2 milliseconds
2026-01-18 17:13:46,310 INFO logspusher-4: uploading setup_var_cache_dir.2026-01-18-17-12-18.log.gz using putObject, file length 1520
2026-01-18 17:13:46,311 INFO logspusher-4: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,339 INFO logspusher-3: LogFile to update, s3Path: /mnt/var/log/mk-tmp-on-root/mk-tmp-on-root.log, current S3 size: null, new S3 size: 89
2026-01-18 17:13:46,343 INFO logspusher-2: LogFile to update, s3Path: /emr/instance-controller/log/monitor.log, current S3 size: null, new S3 size: 532
2026-01-18 17:13:46,346 INFO logspusher-4: LogFile to update, s3Path: /emr/setup-devices/setup_var_cache_dir.2026-01-18-17-12-18.log, current S3 size: null, new S3 size: 1520
2026-01-18 17:13:46,348 INFO logspusher-4: From 0 to 9069 of /mnt/var/log/setup-dns/setup-dns.log is compressed
2026-01-18 17:13:46,349 INFO logspusher-4: Compressed /mnt/var/log/setup-dns/setup-dns.log 9069:1804 ratio:5.027161862527716
2026-01-18 17:13:46,349 INFO logspusher-4: Finished compressing file setup-dns.log.gz with time: 1 milliseconds
2026-01-18 17:13:46,349 INFO logspusher-4: uploading setup-dns.log.gz using putObject, file length 1804
2026-01-18 17:13:46,349 INFO logspusher-4: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,356 INFO logspusher-7: LogFile to update, s3Path: /emr/setup-devices/setup_tmp_dir.2026-01-18-17-12-18.log, current S3 size: null, new S3 size: 805
2026-01-18 17:13:46,358 INFO logspusher-7: From 0 to 654 of /emr/instance-controller/log/bootstrap-actions/master.log is compressed
2026-01-18 17:13:46,358 INFO logspusher-7: Compressed /emr/instance-controller/log/bootstrap-actions/master.log 654:270 ratio:2.422222222222222
2026-01-18 17:13:46,358 INFO logspusher-7: Finished compressing file master.log.gz with time: 0 milliseconds
2026-01-18 17:13:46,359 INFO logspusher-7: uploading master.log.gz using putObject, file length 270
2026-01-18 17:13:46,359 INFO logspusher-8: LogFile to update, s3Path: /emr/instance-state/console.log-2026-01-18-17-12, current S3 size: null, new S3 size: 582
2026-01-18 17:13:46,361 INFO logspusher-8: From 0 to 210 of /emr/instance-controller/log/instance-controller.out.2026-01-18-17-12 is compressed
2026-01-18 17:13:46,361 INFO logspusher-8: Compressed /emr/instance-controller/log/instance-controller.out.2026-01-18-17-12 210:173 ratio:1.2138728323699421
2026-01-18 17:13:46,361 INFO logspusher-8: Finished compressing file instance-controller.out.2026-01-18-17-12.gz with time: 1 milliseconds
2026-01-18 17:13:46,361 INFO logspusher-8: uploading instance-controller.out.2026-01-18-17-12.gz using putObject, file length 173
2026-01-18 17:13:46,361 INFO logspusher-8: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,367 INFO logspusher-6: LogFile to update, s3Path: /emr/setup-devices/setup_var_lib_dir.2026-01-18-17-12-18.log, current S3 size: null, new S3 size: 7088
2026-01-18 17:13:46,369 INFO logspusher-2: From 0 to 6042 of /emr/setup-devices/setup_var_log_dir.2026-01-18-17-12-18.log is compressed
2026-01-18 17:13:46,369 INFO logspusher-2: Compressed /emr/setup-devices/setup_var_log_dir.2026-01-18-17-12-18.log 6042:1394 ratio:4.33428981348637
2026-01-18 17:13:46,369 INFO logspusher-2: Finished compressing file setup_var_log_dir.2026-01-18-17-12-18.log.gz with time: 25 milliseconds
2026-01-18 17:13:46,370 INFO logspusher-2: uploading setup_var_log_dir.2026-01-18-17-12-18.log.gz using putObject, file length 1394
2026-01-18 17:13:46,370 INFO logspusher-2: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,370 INFO logspusher-6: From 0 to 90405 of /emr/logpusher/log/logpusher.log is compressed
2026-01-18 17:13:46,370 INFO logspusher-6: Compressed /emr/logpusher/log/logpusher.log 91151:9290 ratio:9.81173304628633
2026-01-18 17:13:46,371 INFO logspusher-6: Finished compressing file logpusher.log.gz with time: 3 milliseconds
2026-01-18 17:13:46,371 INFO logspusher-6: uploading logpusher.log.gz using putObject, file length 9290
2026-01-18 17:13:46,371 INFO logspusher-6: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,375 INFO logspusher-7: Logpusher uses AES-256 as encryption
2026-01-18 17:13:46,385 INFO logspusher-5: LogFile to update, s3Path: /emr/apppusher/log/apppusher.log, current S3 size: null, new S3 size: 1409
2026-01-18 17:13:46,391 INFO logspusher-9: LogFile to update, s3Path: /emr/instance-state/libinstance-controller.log-2026-01-18-17-12, current S3 size: null, new S3 size: 829
2026-01-18 17:13:46,412 INFO logspusher-8: LogFile to update, s3Path: /emr/instance-controller/log/instance-controller.out.2026-01-18-17-12, current S3 size: null, new S3 size: 173
2026-01-18 17:13:46,417 INFO logspusher-7: LogFile to update, s3Path: /emr/instance-controller/log/bootstrap-actions/master.log, current S3 size: null, new S3 size: 270
2026-01-18 17:13:46,424 INFO logspusher-2: LogFile to update, s3Path: /emr/setup-devices/setup_var_log_dir.2026-01-18-17-12-18.log, current S3 size: null, new S3 size: 1394
2026-01-18 17:13:46,427 INFO logspusher-4: LogFile to update, s3Path: /mnt/var/log/setup-dns/setup-dns.log, current S3 size: null, new S3 size: 1804
2026-01-18 17:13:46,429 INFO logspusher-6: LogFile to update, s3Path: /emr/logpusher/log/logpusher.log, current S3 size: null, new S3 size: 9290
2026-01-18 17:13:46,431 INFO logspusher-1: Uploaded 21 logs:
  prepare:   49(ms) db:  35(ms) size:       184 compress: 1.24 /emr/setup-devices/DiskEncryptor.log SYS: 2070(ms)
  prepare:   49(ms) db:   7(ms) size:     21051 compress: 9.45 /emr/instance-controller/log/instance-controller.log SYS: 2130(ms)
  prepare:   37(ms) db:  12(ms) size:      5416 compress: 5.24 /emr/setup-devices/setup_drives.2026-01-18-17-12-18.log SYS: 2067(ms)
  prepare:   36(ms) db:  56(ms) size:       173 compress: 1.21 /emr/logpusher/log/logpusher.out SYS: 2068(ms)
  prepare:   24(ms) db:  45(ms) size:       233 compress: 2.72 /emr/setup-devices/setup_emr_metrics.2026-01-18-17-12-18.log SYS: 2068(ms)
  prepare:    9(ms) db:  26(ms) size:       370 compress: 3.71 /emr/setup-devices/udev.2026-01-18-17-12-25.log SYS: 2070(ms)
  prepare:    7(ms) db:  13(ms) size:       173 compress: 1.21 /emr/apppusher/log/apppusher.out SYS: 2076(ms)
  prepare:   10(ms) db:  51(ms) size:       655 compress: 5.62 /emr/setup-devices/setup_var_tmp_dir.2026-01-18-17-12-18.log SYS: 2071(ms)
  prepare:    4(ms) db:  54(ms) size:        89 compress: 1.21 /mnt/var/log/mk-tmp-on-root/mk-tmp-on-root.log SYS:  67(ms)
  prepare:    1(ms) db:  18(ms) size:       805 compress: 5.18 /emr/setup-devices/setup_tmp_dir.2026-01-18-17-12-18.log SYS:  81(ms)
  prepare:    0(ms) db:  25(ms) size:       582 compress: 3.77 /emr/instance-state/console.log-2026-01-18-17-12 SYS:  68(ms)
  prepare:    0(ms) db:   4(ms) size:       532 compress: 5.35 /emr/instance-controller/log/monitor.log SYS:  63(ms)
  prepare:    1(ms) db:  33(ms) size:      7088 compress: 7.38 /emr/setup-devices/setup_var_lib_dir.2026-01-18-17-12-18.log SYS:  50(ms)
  prepare:    1(ms) db:  13(ms) size:      1409 compress: 6.81 /emr/apppusher/log/apppusher.log SYS:  79(ms)
  prepare:   14(ms) db:  16(ms) size:       829 compress: 3.52 /emr/instance-state/libinstance-controller.log-2026-01-18-17-12 SYS:  69(ms)
  prepare:    2(ms) db:   2(ms) size:      1520 compress: 5.75 /emr/setup-devices/setup_var_cache_dir.2026-01-18-17-12-18.log SYS:  34(ms)
  prepare:   25(ms) db:  19(ms) size:      1394 compress: 4.33 /emr/setup-devices/setup_var_log_dir.2026-01-18-17-12-18.log SYS:  41(ms)
  prepare:    1(ms) db:  17(ms) size:      1804 compress: 5.03 /mnt/var/log/setup-dns/setup-dns.log SYS:  61(ms)
  prepare:    0(ms) db:   2(ms) size:       270 compress: 2.42 /emr/instance-controller/log/bootstrap-actions/master.log SYS:  57(ms)
  prepare:    0(ms) db:   4(ms) size:       173 compress: 1.21 /emr/instance-controller/log/instance-controller.out.2026-01-18-17-12 SYS:  47(ms)
  prepare:    2(ms) db:  20(ms) size:      9290 compress: 9.81 /emr/logpusher/log/logpusher.log SYS:  39(ms)
2026-01-18 17:13:46,434 INFO logspusher-1: HibernateDb contains 1 S3Policys
2026-01-18 17:13:46,442 INFO logspusher-1: HibernateDb contains 23 LogFiles
2026-01-18 17:13:46,443 INFO logspusher-1: logpusher finished normal iteration (1) in (64) seconds.
2026-01-18 17:13:46,443 INFO logspusher-1: Acquired Lock for CHECKPOINT DEFRAG
2026-01-18 17:13:46,517 INFO logspusher-1: Defrag checkpoint Statement Finished in 74 milliseconds
2026-01-18 17:14:12,114 INFO dsm-1: DiskSpaceManager started cycle 2
2026-01-18 17:14:12,114 INFO dsm-1: /mnt   total   27582 MB free   27078 MB used    504 MB (1.83 %)
2026-01-18 17:14:12,115 INFO dsm-1: /emr   total    5056 MB free    4986 MB used     70 MB (1.38 %)
2026-01-18 17:14:12,115 INFO dsm-1: /      total   15283 MB free    8358 MB used   6925 MB (45.31 %)
2026-01-18 17:14:12,117 INFO dsm-1: DiskSpaceManager lastSuccessTime = 2026-01-18T17:13:12.108836815Z , lastFailTime = null
2026-01-18 17:14:12,117 INFO dsm-1: cycle 2 disk: /mnt freeDiskSpaceMb: 27078/27582 MB freeDiskSpaceRatio:0.98
2026-01-18 17:14:12,117 INFO dsm-1: Disk /mnt had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:14:12,117 INFO dsm-1: cycle 2 disk: /emr freeDiskSpaceMb: 4986/5056 MB freeDiskSpaceRatio:0.99
2026-01-18 17:14:12,117 INFO dsm-1: Disk /emr had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:14:12,117 INFO dsm-1: DSM cycle finished in 2 milliseconds
2026-01-18 17:14:41,815 INFO rpcPoller-1: Initialized configset from IC's internal rpc
2026-01-18 17:14:41,858 INFO rpcPoller-1: update SignedPolicy SYSTEM_LOG bucket: aws157-logs-prod prefix: j-5MT0VO3U70E1/ expiration: 2026-01-18 06:12:45.348 PM
2026-01-18 17:14:41,859 INFO rpcPoller-1: add SignedPolicy USER_LOG bucket: cfggii23 prefix: dsp2/logs/j-5MT0VO3U70E1/ expiration: 2026-01-18 06:12:45.373 PM
2026-01-18 17:14:41,859 INFO rpcPoller-1: save policy to db: SignedPolicy SYSTEM_LOG bucket: aws157-logs-prod prefix: j-5MT0VO3U70E1/ expiration: 2026-01-18 06:12:45.348 PM
2026-01-18 17:14:41,864 INFO rpcPoller-1: save policy to db: SignedPolicy USER_LOG bucket: cfggii23 prefix: dsp2/logs/j-5MT0VO3U70E1/ expiration: 2026-01-18 06:12:45.373 PM
2026-01-18 17:15:12,121 INFO dsm-1: DiskSpaceManager started cycle 3
2026-01-18 17:15:12,122 INFO dsm-1: /mnt   total   27582 MB free   27073 MB used    509 MB (1.85 %)
2026-01-18 17:15:12,122 INFO dsm-1: /emr   total    5056 MB free    4986 MB used     70 MB (1.38 %)
2026-01-18 17:15:12,122 INFO dsm-1: /      total   15283 MB free    8359 MB used   6924 MB (45.31 %)
2026-01-18 17:15:12,123 INFO dsm-1: DiskSpaceManager lastSuccessTime = 2026-01-18T17:14:12.117478409Z , lastFailTime = null
2026-01-18 17:15:12,124 INFO dsm-1: cycle 3 disk: /mnt freeDiskSpaceMb: 27073/27582 MB freeDiskSpaceRatio:0.98
2026-01-18 17:15:12,124 INFO dsm-1: Disk /mnt had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:15:12,124 INFO dsm-1: cycle 3 disk: /emr freeDiskSpaceMb: 4986/5056 MB freeDiskSpaceRatio:0.99
2026-01-18 17:15:12,124 INFO dsm-1: Disk /emr had sufficient free space, skipping directories scan for this cycle
2026-01-18 17:15:12,124 INFO dsm-1: DSM cycle finished in 2 milliseconds

# dump log pusher stdout
tail -n 100 /emr/logpusher/log/logpusher.out
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.

if [ "$dumpType" == "full" ]; then 
  echo "Kicking off a dump-jstack run in the background."
  timeout -s SIGKILL 2h /usr/bin/dump-jstack > /emr/instance-state/jstack.log-`date +\%Y-\%m-\%d-\%H-\%M` 2>&1 &
fi
Kicking off a dump-jstack run in the background.

# dump service nanny log
tail -n 20 /emr/service-nanny/log/service-nanny-`date +%Y-%m-%d`
tail: cannot open '/emr/service-nanny/log/service-nanny-2026-01-18' for reading: No such file or directory

# dump mysql process list
mysqladmin -u root processlist | awk -F'|' '{print $6, $7, $8, $9}' | grep -v '^\s*$'
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local server through socket '/var/lib/mysql/mysql.sock' (2)'
Check that mariadbd is running and that the socket: '/var/lib/mysql/mysql.sock' exists!

# Can we contact dom0?
curl --connect-timeout 2 -q -f --retry 5 -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 1" >/dev/null
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100    56  100    56    0     0  46822      0 --:--:-- --:--:-- --:--:-- 56000

# Can we access master?
set +o verbose
On master, attempting to access port 8443
Ncat: Version 7.93 ( https://nmap.org/ncat )
Ncat: Connected to 127.0.0.1:8443.
 Z  Ncat: 1 bytes sent, 14 bytes received in 0.02 seconds.

ResourceManager heap stats:
Attaching to process ID 10202, please wait...
Exception in thread "main" java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.tools.jmap.JMap.runTool(JMap.java:201)
	at sun.tools.jmap.JMap.main(JMap.java:130)
Caused by: java.lang.RuntimeException: Type "GenericGrowableArray", referenced in VMStructs::localHotSpotVMStructs in the remote VM, was not present in the remote VMStructs::localHotSpotVMTypes table (should have been caught in the debug build of that VM). Can not continue.
	at sun.jvm.hotspot.HotSpotTypeDataBase.lookupOrFail(HotSpotTypeDataBase.java:596)
	at sun.jvm.hotspot.HotSpotTypeDataBase.lookupType(HotSpotTypeDataBase.java:120)
	at sun.jvm.hotspot.HotSpotTypeDataBase.lookupOrCreateClass(HotSpotTypeDataBase.java:631)
	at sun.jvm.hotspot.HotSpotTypeDataBase.createType(HotSpotTypeDataBase.java:751)
	at sun.jvm.hotspot.HotSpotTypeDataBase.readVMTypes(HotSpotTypeDataBase.java:195)
	at sun.jvm.hotspot.HotSpotTypeDataBase.<init>(HotSpotTypeDataBase.java:89)
	at sun.jvm.hotspot.HotSpotAgent.setupVM(HotSpotAgent.java:396)
	at sun.jvm.hotspot.HotSpotAgent.go(HotSpotAgent.java:306)
	at sun.jvm.hotspot.HotSpotAgent.attach(HotSpotAgent.java:141)
	at sun.jvm.hotspot.tools.Tool.start(Tool.java:185)
	at sun.jvm.hotspot.tools.Tool.execute(Tool.java:118)
	at sun.jvm.hotspot.tools.HeapSummary.main(HeapSummary.java:49)
	... 6 more
Namenode heap stats:
Attaching to process ID 8931, please wait...
Exception in thread "main" java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at sun.tools.jmap.JMap.runTool(JMap.java:201)
	at sun.tools.jmap.JMap.main(JMap.java:130)
Caused by: java.lang.RuntimeException: Type "GenericGrowableArray", referenced in VMStructs::localHotSpotVMStructs in the remote VM, was not present in the remote VMStructs::localHotSpotVMTypes table (should have been caught in the debug build of that VM). Can not continue.
	at sun.jvm.hotspot.HotSpotTypeDataBase.lookupOrFail(HotSpotTypeDataBase.java:596)
	at sun.jvm.hotspot.HotSpotTypeDataBase.lookupType(HotSpotTypeDataBase.java:120)
	at sun.jvm.hotspot.HotSpotTypeDataBase.lookupOrCreateClass(HotSpotTypeDataBase.java:631)
	at sun.jvm.hotspot.HotSpotTypeDataBase.createType(HotSpotTypeDataBase.java:751)
	at sun.jvm.hotspot.HotSpotTypeDataBase.readVMTypes(HotSpotTypeDataBase.java:195)
	at sun.jvm.hotspot.HotSpotTypeDataBase.<init>(HotSpotTypeDataBase.java:89)
	at sun.jvm.hotspot.HotSpotAgent.setupVM(HotSpotAgent.java:396)
	at sun.jvm.hotspot.HotSpotAgent.go(HotSpotAgent.java:306)
	at sun.jvm.hotspot.HotSpotAgent.attach(HotSpotAgent.java:141)
	at sun.jvm.hotspot.tools.Tool.start(Tool.java:185)
	at sun.jvm.hotspot.tools.Tool.execute(Tool.java:118)
	at sun.jvm.hotspot.tools.HeapSummary.main(HeapSummary.java:49)
	... 6 more
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 172.31.39.66:54364      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54352      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54426      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:8025       172.31.41.194:48260     ESTABLISHED 10202/java          
tcp        0      0 172.31.39.66:54380      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:8020       172.31.44.238:43326     ESTABLISHED 8931/java           
tcp        0      0 172.31.39.66:8020       172.31.41.194:46006     ESTABLISHED 8931/java           
tcp        0      0 172.31.39.66:8025       172.31.44.238:37374     ESTABLISHED 10202/java          
tcp        0      0 172.31.39.66:54414      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54630      172.31.39.66:8020       TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54384      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:48994      172.31.39.66:8020       TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54420      172.31.39.66:8020       TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54398      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 127.0.0.1:47550         127.0.0.1:8443          TIME_WAIT   -                   
tcp        0      0 172.31.39.66:49010      172.31.39.66:8020       TIME_WAIT   -                   
tcp        0      0 172.31.39.66:54350      169.254.169.254:80      TIME_WAIT   -                   
tcp        0      0 172.31.39.66:57238      169.254.169.254:80      TIME_WAIT   -                   
tcp6       1      0 127.0.0.1:52010         127.0.0.1:8321          CLOSE_WAIT  4164/java           
tcp6       0      0 127.0.0.1:54659         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:33243         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:39285         127.0.0.1:8321          TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49570      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 127.0.0.1:49161         127.0.0.1:8321          TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49558      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 127.0.0.1:56207         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:37432      172.31.39.66:8088       TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49594      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 127.0.0.1:52291         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:33645         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:54831         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:40909         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:37422      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:33964      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:54773         127.0.0.1:9500          TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49610      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 127.0.0.1:58487         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:49663         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:37420      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:49693         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:40456      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:48711         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:41100      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:52008         127.0.0.1:8321          ESTABLISHED 4164/java           
tcp6      25      0 172.31.39.66:43394      54.231.170.40:443       CLOSE_WAIT  4164/java           
tcp6       0      0 127.0.0.1:56019         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:33960      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:48217         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:57383         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:40466      172.31.39.66:8088       TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:37392      172.31.39.66:8088       TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49624      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 172.31.39.66:37396      172.31.39.66:8088       TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49562      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 127.0.0.1:45167         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 172.31.39.66:37404      172.31.39.66:8088       TIME_WAIT   -                   
tcp6      25      0 172.31.39.66:49550      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 172.31.39.66:42656      172.31.39.66:8020       TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:51615         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       1      0 127.0.0.1:51998         127.0.0.1:8321          CLOSE_WAIT  4164/java           
tcp6       0      0 127.0.0.1:34815         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:8321          127.0.0.1:52008         ESTABLISHED 4250/java           
tcp6      25      0 172.31.39.66:49586      52.217.65.152:443       CLOSE_WAIT  4137/java           
tcp6       0      0 127.0.0.1:59833         127.0.0.1:8321          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:8321          127.0.0.1:52010         FIN_WAIT2   4250/java           
tcp6       0      0 127.0.0.1:8321          127.0.0.1:51998         FIN_WAIT2   4250/java           
tcp6       0      0 127.0.0.1:54419         127.0.0.1:9500          TIME_WAIT   -                   
tcp6       0      0 127.0.0.1:54771         127.0.0.1:8321          TIME_WAIT   -                   
Active UNIX domain sockets (w/o servers)
Proto RefCnt Flags       Type       State         I-Node   PID/Program name     Path
unix  2      [ ]         DGRAM      CONNECTED     1860     1867/gssproxy        
unix  3      [ ]         STREAM     CONNECTED     15141    1795/irqbalance      
unix  3      [ ]         STREAM     CONNECTED     1805     1806/upowerd         
unix  2      [ ]         STREAM     CONNECTED     54011    8931/java            
unix  3      [ ]         STREAM     CONNECTED     15136    1790/dbus-broker-la  
unix  3      [ ]         DGRAM      CONNECTED     15260    1846/systemd-networ  
unix  3      [ ]         STREAM     CONNECTED     19143    3818/amazon-ssm-age  
unix  3      [ ]         STREAM     CONNECTED     1757     1791/dbus-broker     /run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    26690    4224/systemd         /run/user/0/systemd/notify
unix  3      [ ]         STREAM     CONNECTED     15762    1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     23731    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     22319    1/systemd            /run/systemd/journal/stdout
unix  2      [ ]         DGRAM                    15746    1804/systemd-homed   /run/systemd/home/notify
unix  2      [ ]         DGRAM      CONNECTED     15251    1846/systemd-networ  
unix  3      [ ]         STREAM     CONNECTED     15134    1790/dbus-broker-la  
unix  3      [ ]         STREAM     CONNECTED     15236    1/systemd            /run/systemd/journal/stdout
unix  2      [ ]         STREAM     CONNECTED     68989    10859/java           
unix  3      [ ]         STREAM     CONNECTED     16000    1791/dbus-broker     /run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    23312    3859/chronyd         /run/chrony/chronyd.sock
unix  3      [ ]         DGRAM      CONNECTED     15261    1846/systemd-networ  
unix  3      [ ]         DGRAM      CONNECTED     12807    1/systemd            /run/systemd/notify
unix  3      [ ]         STREAM     CONNECTED     1847     1867/gssproxy        
unix  2      [ ]         STREAM     CONNECTED     26960    4250/java            
unix  3      [ ]         STREAM     CONNECTED     15257    1846/systemd-networ  
unix  3      [ ]         STREAM     CONNECTED     15726    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     23728    3849/crond           
unix  9      [ ]         DGRAM      CONNECTED     12823    1/systemd            /run/systemd/journal/dev-log
unix  3      [ ]         STREAM     CONNECTED     15207    1805/systemd-logind  
unix  15     [ ]         DGRAM      CONNECTED     12825    1/systemd            /run/systemd/journal/socket
unix  2      [ ]         DGRAM      CONNECTED     15195    1805/systemd-logind  
unix  3      [ ]         STREAM     CONNECTED     15813    1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     16015    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         DGRAM      CONNECTED     15259    1846/systemd-networ  
unix  2      [ ]         STREAM     CONNECTED     26735    4137/java            
unix  3      [ ]         STREAM     CONNECTED     17108    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         DGRAM      CONNECTED     15262    1846/systemd-networ  
unix  3      [ ]         STREAM     CONNECTED     15135    1791/dbus-broker     
unix  3      [ ]         STREAM     CONNECTED     1814     1846/systemd-networ  
unix  2      [ ]         DGRAM      CONNECTED     24855    4226/(sd-pam)        
unix  3      [ ]         STREAM     CONNECTED     15153    1805/systemd-logind  
unix  3      [ ]         DGRAM      CONNECTED     12808    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     94740    12049/sudo           
unix  3      [ ]         STREAM     CONNECTED     25827    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     17109    1796/lsmd            
unix  3      [ ]         STREAM     CONNECTED     17107    1792/systemd-inhibi  
unix  3      [ ]         STREAM     CONNECTED     95852    1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     1763     1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     15710    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         DGRAM      CONNECTED     12809    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     24045    4224/systemd         
unix  2      [ ]         STREAM     CONNECTED     28091    4164/java            
unix  2      [ ]         DGRAM      CONNECTED     24067    4224/systemd         
unix  3      [ ]         STREAM     CONNECTED     19447    4205/systemd-userdb  
unix  2      [ ]         DGRAM      CONNECTED     15694    1790/dbus-broker-la  
unix  2      [ ]         DGRAM      CONNECTED     15424    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     26695    4224/systemd         
unix  3      [ ]         DGRAM      CONNECTED     15518    1614/systemd-udevd   
unix  3      [ ]         STREAM     CONNECTED     49999    8345/nginx: master   
unix  3      [ ]         DGRAM      CONNECTED     26692    4224/systemd         
unix  3      [ ]         STREAM     CONNECTED     15132    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     49998    8345/nginx: master   
unix  3      [ ]         STREAM     CONNECTED     15698    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     15502    1613/systemd-resolv  
unix  3      [ ]         STREAM     CONNECTED     24797    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     13071    1/systemd            /run/systemd/journal/stdout
unix  2      [ ]         DGRAM      CONNECTED     26649    4209/systemd-userwo  
unix  3      [ ]         STREAM     CONNECTED     15684    1790/dbus-broker-la  
unix  3      [ ]         DGRAM      CONNECTED     15519    1614/systemd-udevd   
unix  3      [ ]         STREAM     CONNECTED     68891    10202/java           
unix  3      [ ]         DGRAM      CONNECTED     15716    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     24075    1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     1755     1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         DGRAM      CONNECTED     26691    4224/systemd         
unix  2      [ ]         DGRAM      CONNECTED     15514    1614/systemd-udevd   
unix  3      [ ]         DGRAM      CONNECTED     15715    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     68890    10202/java           
unix  2      [ ]         DGRAM                    48994    8067/httpd           
unix  3      [ ]         DGRAM      CONNECTED     17201    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     91294    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     1572     1618/auditd          
unix  2      [ ]         DGRAM      CONNECTED     96381    11990/systemd-userw  
unix  3      [ ]         STREAM     CONNECTED     17141    1804/systemd-homed   
unix  3      [ ]         STREAM     CONNECTED     1548     1614/systemd-udevd   
unix  3      [ ]         STREAM     CONNECTED     17117    1799/rtkit-daemon    
unix  2      [ ]         STREAM     CONNECTED     63854    9801/java            
unix  3      [ ]         STREAM     CONNECTED     1744     1613/systemd-resolv  
unix  2      [ ]         DGRAM      CONNECTED     95823    12049/sudo           
unix  2      [ ]         STREAM     CONNECTED     65451    10202/java           
unix  3      [ ]         STREAM     CONNECTED     1573     1618/auditd          
unix  2      [ ]         DGRAM      CONNECTED     23303    3859/chronyd         
unix  2      [ ]         DGRAM      CONNECTED     25799    4205/systemd-userdb  
unix  3      [ ]         STREAM     CONNECTED     1754     1791/dbus-broker     /run/dbus/system_bus_socket
unix  3      [ ]         DGRAM      CONNECTED     96273    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     17149    1806/upowerd         
unix  2      [ ]         DGRAM      CONNECTED     1569     1613/systemd-resolv  
unix  2      [ ]         DGRAM      CONNECTED     15745    1804/systemd-homed   
unix  3      [ ]         STREAM     CONNECTED     23195    1/systemd            /run/systemd/journal/stdout
unix  2      [ ]         STREAM     CONNECTED     62136    9564/java            
unix  3      [ ]         STREAM     CONNECTED     48953    8067/httpd           
unix  3      [ ]         STREAM     CONNECTED     14948    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     62998    9564/java            
unix  3      [ ]         STREAM     CONNECTED     15748    1791/dbus-broker     /run/dbus/system_bus_socket
unix  2      [ ]         STREAM     CONNECTED     76921    11348/java           
unix  3      [ ]         STREAM     CONNECTED     17142    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     23191    3827/sshd: /usr/sbi  
unix  2      [ ]         DGRAM      CONNECTED     23257    3849/crond           
unix  3      [ ]         DGRAM      CONNECTED     96272    1/systemd            
unix  3      [ ]         DGRAM      CONNECTED     17200    1/systemd            
unix  3      [ ]         STREAM     CONNECTED     61152    9801/java            
unix  3      [ ]         STREAM     CONNECTED     15747    1804/systemd-homed   
unix  3      [ ]         STREAM     CONNECTED     15719    1/systemd            /run/systemd/journal/stdout
unix  2      [ ]         DGRAM      CONNECTED     1571     1618/auditd          
unix  2      [ ]         STREAM     CONNECTED     61244    9962/java            
unix  3      [ ]         STREAM     CONNECTED     62997    9564/java            
unix  3      [ ]         STREAM     CONNECTED     15729    1/systemd            /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     61151    9801/java            
unix  3      [ ]         STREAM     CONNECTED     47099    1/systemd            /run/systemd/journal/stdout
unix  2      [ ]         DGRAM      CONNECTED     91977    11991/systemd-userw  
unix  3      [ ]         STREAM     CONNECTED     95503    11841/systemd-hostn  
unix  2      [ ]         STREAM     CONNECTED     74723    11348/java           
unix  2      [ ]         DGRAM      CONNECTED     1430     1041/systemd-journa  
Active Bluetooth connections (w/o servers)
Proto  Destination       Source            State         PSM DCID   SCID      IMTU    OMTU Security
Proto  Destination       Source            State     Channel
HDFS usage:
Configured Capacity: 124283478016 (115.75 GB)
Present Capacity: 124283478016 (115.75 GB)
DFS Remaining: 124283461632 (115.75 GB)
DFS Used: 16384 (16 KB)
DFS Used%: 0.00%
Replicated Blocks:
	Under replicated blocks: 0
	Blocks with corrupt replicas: 0
	Missing blocks: 0
	Missing blocks (with replication factor 1): 0
	Low redundancy blocks with highest priority to recover: 0
	Pending deletion blocks: 0
Erasure Coded Block Groups: 
	Low redundancy block groups: 0
	Block groups with corrupt internal blocks: 0
	Missing block groups: 0
	Low redundancy blocks with highest priority to recover: 0
	Pending deletion blocks: 0

-------------------------------------------------
Live datanodes (2):

Name: 172.31.41.194:9866 (ip-172-31-41-194.ec2.internal)
Hostname: ip-172-31-41-194.ec2.internal
Decommission Status : Normal
Configured Capacity: 62141739008 (57.87 GB)
DFS Used: 8192 (8 KB)
Non DFS Used: 0 (0 B)
DFS Remaining: 62141730816 (57.87 GB)
DFS Used%: 0.00%
DFS Remaining%: 100.00%
Configured Cache Capacity: 0 (0 B)
Cache Used: 0 (0 B)
Cache Remaining: 0 (0 B)
Cache Used%: 100.00%
Cache Remaining%: 0.00%
Xceivers: 0
Last contact: Sun Jan 18 17:15:31 UTC 2026
Last Block Report: Sun Jan 18 17:13:47 UTC 2026
Num of Blocks: 0


Name: 172.31.44.238:9866 (ip-172-31-44-238.ec2.internal)
Hostname: ip-172-31-44-238.ec2.internal
Decommission Status : Normal
Configured Capacity: 62141739008 (57.87 GB)
DFS Used: 8192 (8 KB)
Non DFS Used: 0 (0 B)
DFS Remaining: 62141730816 (57.87 GB)
DFS Used%: 0.00%
DFS Remaining%: 100.00%
Configured Cache Capacity: 0 (0 B)
Cache Used: 0 (0 B)
Cache Remaining: 0 (0 B)
Cache Used%: 100.00%
Cache Remaining%: 0.00%
Xceivers: 0
Last contact: Sun Jan 18 17:15:32 UTC 2026
Last Block Report: Sun Jan 18 17:13:47 UTC 2026
Num of Blocks: 0



# Can we access the outside world?
curl -s -I --connect-timeout 1 --max-time 5 http://elasticmapreduce.s3.amazonaws.com | head
HTTP/1.1 200 OK
x-amz-id-2: anrbhVI6uxwjDyXXdxRPVl6+H3U1UWMHxDcmRArTphLKjKLfYfZShy/RoY46gIaQNAxkd7BoZEcbZ1yOGe0luPDmnBm3I9P5
x-amz-request-id: 5523M8KDJ086A43P
Date: Sun, 18 Jan 2026 17:15:35 GMT
x-amz-bucket-region: us-east-1
x-amz-access-point-alias: false
x-amz-bucket-arn: arn:aws:s3:::elasticmapreduce
Content-Type: application/xml
Transfer-Encoding: chunked
Server: AmazonS3

# Now traceroute it
traceroute -T --sport=17241 -p 443 -w 3 -n -m 10 elasticmapreduce.s3.amazonaws.com
traceroute to elasticmapreduce.s3.amazonaws.com (3.5.3.211), 10 hops max, 60 byte packets
 1  * * *
 2  3.5.3.211  0.800 ms  0.650 ms  0.667 ms

# listing of last logged in users
last -w -n 25
reboot   system boot  6.1.158-178.288.amzn2023.x86_64 Sun Jan 18 17:12   still running

wtmp begins Sun Jan 18 17:12:10 2026

# whats io usage look like
iostat -x 1 5
Linux 6.1.158-178.288.amzn2023.x86_64 (ip-172-31-39-66.ec2.internal) 	01/18/26 	_x86_64_	(4 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
          27.65    0.11    3.87    3.00    0.02   65.35

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1        160.50   3817.49     0.06   0.04    1.17    23.79    6.21    274.30     2.56  29.18    1.29    44.17    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.20  13.81
nvme1n1          3.56     51.30     0.00   0.00    0.60    14.42   23.46   2408.25     6.55  21.84    1.76   102.67    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.04   0.92
nvme2n1          1.87     21.33     0.00   0.00    0.60    11.39    2.72    328.47     0.13   4.61    1.89   120.86    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.01   0.27


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           1.27    0.00    2.28    0.00    0.00   96.46

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    1.00      8.00     0.00   0.00    1.00     8.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.77    0.00    0.77    0.00    0.00   98.45

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          0.00      0.00     0.00   0.00    0.00     0.00   10.00    104.00     1.00   9.09    1.00    10.40    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.01   0.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    4.00     32.00     1.00  20.00    1.25     8.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
          62.06    0.00    1.26    0.00    0.00   36.68

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          5.00    148.00     0.00   0.00    0.80    29.60    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   1.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    3.00     16.00     0.00   0.00    0.67     5.33    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00


avg-cpu:  %user   %nice %system %iowait  %steal   %idle
          72.82    0.00    3.99    0.00    0.00   23.19

Device            r/s     rkB/s   rrqm/s  %rrqm r_await rareq-sz     w/s     wkB/s   wrqm/s  %wrqm w_await wareq-sz     d/s     dkB/s   drqm/s  %drqm d_await dareq-sz     f/s f_await  aqu-sz  %util
nvme0n1          1.00     72.00     0.00   0.00    1.00    72.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme1n1          0.00      0.00     0.00   0.00    0.00     0.00    4.00     28.00     0.00   0.00    1.00     7.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00
nvme2n1          0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00      0.00     0.00   0.00    0.00     0.00    0.00    0.00    0.00   0.00



# whats memory usage look like
free -m
               total        used        free      shared  buff/cache   available
Mem:           15779        3790       10866           8        1122       11659
Swap:              0           0           0

# trend memory
vmstat 1 5
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
10  0      0 11127212   5332 1144020    0    0   962   744  601 1126 28  4 65  3  0
 2  0      0 11082840   5332 1145384    0    0  1148     0 3879 8250 73  2 24  1  0
 2  0      0 10975012   5332 1145388    0    0     4    24 4340 7991 61  2 37  0  0
 2  0      0 10929172   5332 1145632    0    0   292    20 4664 8046 48  4 48  0  0
 0  0      0 10900392   5332 1146108    0    0   468    72 3668 6699 39  2 58  0  0

# amount of disk free
df -lh
Filesystem        Size  Used Avail Use% Mounted on
devtmpfs          4.0M     0  4.0M   0% /dev
tmpfs             7.8G     0  7.8G   0% /dev/shm
tmpfs             3.1G  8.6M  3.1G   1% /run
/dev/nvme0n1p1     15G  6.8G  8.2G  46% /
/dev/nvme0n1p128   10M  1.3M  8.7M  13% /boot/efi
/dev/nvme1n1p1    5.0G   71M  4.9G   2% /emr
/dev/nvme1n1p2     27G  511M   27G   2% /mnt
/dev/nvme2n1       32G  263M   32G   1% /mnt1
tmpfs             1.6G  4.0K  1.6G   1% /run/user/0

# amount of inode free
df -ilh
Filesystem       Inodes IUsed IFree IUse% Mounted on
devtmpfs           2.0M   394  2.0M    1% /dev
tmpfs              2.0M     1  2.0M    1% /dev/shm
tmpfs              800K   705  800K    1% /run
/dev/nvme0n1p1     7.5M  112K  7.4M    2% /
/dev/nvme0n1p128      0     0     0     - /boot/efi
/dev/nvme1n1p1     2.5M    93  2.5M    1% /emr
/dev/nvme1n1p2      14M  2.7K   14M    1% /mnt
/dev/nvme2n1        16M    16   16M    1% /mnt1
tmpfs              395K    23  395K    1% /run/user/0

set +o verbose

# Top 10 largest files and folders including not subdirectories in /mnt/
du -hsx /mnt/* | sort -rh | head -10
276M	/mnt/var
1.1M	/mnt/tmp
1.1M	/mnt/namenode
0	/mnt/s3
0	/mnt/mapred

# Top 10 largest files and folders in /mnt/var/*
du -hsx /mnt/var/* | sort -rh | head -10
188M	/mnt/var/cache
63M	/mnt/var/lib
26M	/mnt/var/log
4.0K	/mnt/var/tmp
0	/mnt/var/run
0	/mnt/var/em

# Top 20 largest files and folders including subdirectories in /mnt/var/log
du -hx /mnt/var/log | sort -rh | head -20
26M	/mnt/var/log
25M	/mnt/var/log/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7
25M	/mnt/var/log/journal
1.2M	/mnt/var/log/provision-node
844K	/mnt/var/log/provision-node/reports/0/bb5dde10-594f-4fd5-ad12-8daa70b5ad6f
844K	/mnt/var/log/provision-node/reports/0
844K	/mnt/var/log/provision-node/reports
792K	/mnt/var/log/provision-node/reports/0/bb5dde10-594f-4fd5-ad12-8daa70b5ad6f/core_set/ip-172-31-39-66.ec2.internal
792K	/mnt/var/log/provision-node/reports/0/bb5dde10-594f-4fd5-ad12-8daa70b5ad6f/core_set
340K	/mnt/var/log/provision-node/apps-phase/0/bb5dde10-594f-4fd5-ad12-8daa70b5ad6f
340K	/mnt/var/log/provision-node/apps-phase/0
340K	/mnt/var/log/provision-node/apps-phase
216K	/mnt/var/log/hadoop-yarn
124K	/mnt/var/log/tmp/logpusher
124K	/mnt/var/log/tmp
116K	/mnt/var/log/tmp/logpusher/emr
100K	/mnt/var/log/hadoop-hdfs
48K	/mnt/var/log/tmp/logpusher/emr/setup-devices
40K	/mnt/var/log/hadoop-mapreduce
36K	/mnt/var/log/tmp/logpusher/emr/instance-controller/log

# List the entire /emr/ partition in a human readable format
ls -lhR /emr/
/emr/:
total 4.0K
drwx------. 7 hadoop hadoop   68 Jan 18 17:14 apppusher
drwxr-x---. 6 hadoop hadoop   49 Jan 18 17:12 instance-controller
drwxr-x---. 2 hadoop hadoop  171 Jan 18 17:15 instance-state
drwx------. 6 root   root     49 Jan 18 17:12 logpusher
drwxr-xr-x. 2 hadoop hadoop   43 Jan 18 17:15 logpusher-system-overrides
drwxr-xr-x. 2 hadoop hadoop   43 Jan 18 17:15 logpusher-user-overrides
drwxr-xr-x. 5 hadoop hadoop   55 Jan 18 17:15 metricscollector
drwxr-xr-x. 2 root   root   4.0K Jan 18 17:12 setup-devices

/emr/apppusher:
total 0
drwx------. 2 hadoop hadoop   6 Jan 18 17:12 data
drwx------. 2 hadoop hadoop   6 Jan 18 17:12 local
drwx------. 2 hadoop hadoop  48 Jan 18 17:12 log
drwx------. 2 hadoop hadoop  27 Jan 18 17:12 run
drwx------. 3 root   root   101 Jan 18 17:14 ytsdata

/emr/apppusher/data:
total 0

/emr/apppusher/local:
total 0

/emr/apppusher/log:
total 24K
-rw-------. 1 root root 17K Jan 18 17:14 apppusher.log
-rw-------. 1 root root 210 Jan 18 17:12 apppusher.out

/emr/apppusher/run:
total 4.0K
-rw-------. 1 root root 5 Jan 18 17:12 apppusher.pid

/emr/apppusher/ytsdata:
total 16K
-rw-------. 1 root root   16 Jan 18 17:15 audit.lck
-rw-------. 1 root root  712 Jan 18 17:14 audit.log
-rw-------. 1 root root  100 Jan 18 17:14 audit.properties
-rw-------. 1 root root 1.6K Jan 18 17:14 audit.script
drwx------. 2 root root    6 Jan 18 17:14 audit.tmp

/emr/apppusher/ytsdata/audit.tmp:
total 0

/emr/instance-controller:
total 0
drwxr-xr-x. 3 hadoop hadoop 113 Jan 18 17:12 db
drwxr-xr-x. 4 hadoop hadoop 115 Jan 18 17:12 lib
drwxr-xr-x. 4 hadoop hadoop 152 Jan 18 17:13 log
drwxr-xr-x. 3 hadoop hadoop  75 Jan 18 17:12 run

/emr/instance-controller/db:
total 68K
-rw-r--r--. 1 hadoop hadoop  32K Jan 18 17:12 data.data
-rw-r--r--. 1 hadoop hadoop   16 Jan 18 17:15 data.lck
-rw-r--r--. 1 hadoop hadoop  48K Jan 18 17:15 data.log
-rw-r--r--. 1 hadoop hadoop  100 Jan 18 17:12 data.properties
-rw-r--r--. 1 hadoop hadoop 1.7K Jan 18 17:12 data.script
drwxr-xr-x. 2 hadoop hadoop    6 Jan 18 17:12 data.tmp

/emr/instance-controller/db/data.tmp:
total 0

/emr/instance-controller/lib:
total 8.0K
-rw-r--r--. 1 hadoop hadoop   0 Jan 18 17:12 dfs.hosts.exclude
drwxr-xr-x. 2 hadoop hadoop 104 Jan 18 17:14 info
-rw-r--r--. 1 hadoop hadoop  30 Jan 18 17:12 security.properties
drwxr-xr-x. 2 hadoop hadoop  87 Jan 18 17:12 sslKeys
-rw-r--r--. 1 hadoop hadoop  49 Jan 18 17:12 yarn.nodes.exclude.xml

/emr/instance-controller/lib/info:
total 32K
-rw-r--r--. 1 root   root   2.9K Jan 18 17:12 extraInstanceData.json
-rw-r--r--. 1 hadoop hadoop   63 Jan 18 17:12 instance.json
-rw-r--r--. 1 hadoop hadoop  20K Jan 18 17:14 job-flow-state.txt
-rw-r--r--. 1 hadoop hadoop  763 Jan 18 17:14 job-flow.json

/emr/instance-controller/lib/sslKeys:
total 12K
-rw-------. 1 hadoop hadoop 1.2K Jan 18 17:12 ic_external_trust_store
-rw-------. 1 hadoop hadoop  578 Jan 18 17:12 ic_internal_trust_store
-rw-------. 1 hadoop hadoop 1.5K Jan 18 17:12 ic_keystore

/emr/instance-controller/log:
total 844K
drwxr-xr-x. 2 hadoop hadoop   24 Jan 18 17:12 bootstrap-actions
drwxr-xr-x. 2 hadoop hadoop   96 Jan 18 17:13 hadoop-commands
-rw-r--r--. 1 hadoop hadoop 574K Jan 18 17:15 instance-controller.log
-rw-r--r--. 1 hadoop hadoop  210 Jan 18 17:12 instance-controller.out.2026-01-18-17-12
-rw-r--r--. 1 hadoop hadoop 6.7K Jan 18 17:15 monitor.log

/emr/instance-controller/log/bootstrap-actions:
total 4.0K
-rw-r--r--. 1 hadoop hadoop 654 Jan 18 17:12 master.log

/emr/instance-controller/log/hadoop-commands:
total 4.0K
-rw-r--r--. 1 hadoop hadoop 229 Jan 18 17:13 2026-01-18T17:13:16.738585149Z.stderr
-rw-r--r--. 1 hadoop hadoop   0 Jan 18 17:13 2026-01-18T17:13:16.738585149Z.stdout

/emr/instance-controller/run:
total 4.0K
-rw-r--r--. 1 hadoop hadoop  0 Jan 18 17:12 cwmetrics.ckp
drwxr-xr-x. 2 hadoop hadoop 20 Jan 18 17:12 heartbeat
-rw-r--r--. 1 hadoop hadoop  4 Jan 18 17:12 instance-controller.pid

/emr/instance-controller/run/heartbeat:
total 0
-rw-r--r--. 1 hadoop hadoop 0 Jan 18 17:15 uplink

/emr/instance-state:
total 852K
-rw-r--r--. 1 hadoop hadoop 2.2K Jan 18 17:12 console.log-2026-01-18-17-12
-rw-r--r--. 1 root   root   126K Jan 18 17:15 instance-state.log-2026-01-18-17-15
-rw-r--r--. 1 root   root   714K Jan 18 17:15 jstack.log-2026-01-18-17-15
-rw-r--r--. 1 hadoop hadoop 2.9K Jan 18 17:12 libinstance-controller.log-2026-01-18-17-12

/emr/logpusher:
total 0
drwxr-xr-x. 3 root root 113 Jan 18 17:14 db
drwxr-xr-x. 2 root root   6 Jan 18 17:12 lib
drwxr-xr-x. 2 root root  48 Jan 18 17:12 log
drwxr-xr-x. 2 root root  27 Jan 18 17:12 run

/emr/logpusher/db:
total 28K
-rw-r--r--. 1 root root  32K Jan 18 17:14 data.data
-rw-r--r--. 1 root root   16 Jan 18 17:15 data.lck
-rw-r--r--. 1 root root 2.7K Jan 18 17:15 data.log
-rw-r--r--. 1 root root  102 Jan 18 17:14 data.properties
-rw-r--r--. 1 root root 2.6K Jan 18 17:13 data.script
drwxr-xr-x. 2 root root    6 Jan 18 17:12 data.tmp

/emr/logpusher/db/data.tmp:
total 0

/emr/logpusher/lib:
total 0

/emr/logpusher/log:
total 104K
-rw-r--r--. 1 root root 97K Jan 18 17:15 logpusher.log
-rw-r--r--. 1 root root 210 Jan 18 17:12 logpusher.out

/emr/logpusher/run:
total 4.0K
-rw-r--r--. 1 root root 4 Jan 18 17:12 logpusher.pid

/emr/logpusher-system-overrides:
total 4.0K
-rw-r--r--. 1 hadoop hadoop 115 Jan 18 17:15 s-01468903VXWGHK3TPVLY.config

/emr/logpusher-user-overrides:
total 4.0K
-rw-r--r--. 1 hadoop hadoop 115 Jan 18 17:15 s-01468903VXWGHK3TPVLY.config

/emr/metricscollector:
total 0
-rw-r--r--. 1 root   root    0 Jan 18 17:15 isbusy
drwxr-xr-x. 2 hadoop hadoop  6 Jan 18 17:14 local
drwxr-xr-x. 2 hadoop hadoop 62 Jan 18 17:14 log
drwxr-xr-x. 2 hadoop hadoop 27 Jan 18 17:15 run

/emr/metricscollector/local:
total 0

/emr/metricscollector/log:
total 132K
-rw-r--r--. 1 root root 68K Jan 18 17:15 metricscollector.log
-rw-r--r--. 1 root root 729 Jan 18 17:15 metricscollector.out

/emr/metricscollector/run:
total 4.0K
-rw-r--r--. 1 root root 173 Jan 18 17:15 cwmetrics.ckp

/emr/setup-devices:
total 124K
-rw-r--r--. 1 root root  228 Jan 18 17:12 DiskEncryptor.log
-rw-r--r--. 1 root root  28K Jan 18 17:12 setup_drives.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root  633 Jan 18 17:12 setup_emr_metrics.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root 4.1K Jan 18 17:12 setup_tmp_dir.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root 8.6K Jan 18 17:12 setup_var_cache_dir.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root  52K Jan 18 17:12 setup_var_lib_dir.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root 6.0K Jan 18 17:12 setup_var_log_dir.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root 3.6K Jan 18 17:12 setup_var_tmp_dir.2026-01-18-17-12-18.log
-rw-r--r--. 1 root root 1.4K Jan 18 17:12 udev.2026-01-18-17-12-25.log

set -x

# list all deleted but open files
mounts=$(lsblk -o MOUNTPOINT | grep -v "^$" | grep -v "MOUNTPOINT")
++ lsblk -o MOUNTPOINT
++ grep -v '^$'
++ grep -v MOUNTPOINT
+ mounts='/mnt1
/
/boot/efi
/emr
/mnt'
echo $mounts | while read -r mount; do
  lsof $mount | grep deleted
done
+ echo /mnt1 / /boot/efi /emr /mnt
+ read -r mount
+ lsof /mnt1 / /boot/efi /emr /mnt
+ grep deleted
systemd-j  1041            root   16u   REG  259,3   8388608  8529812 /var/log.old/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7/system.journal (deleted)
auditd     1618            root    5w   REG  259,3    519652  1194089 /var/log.old/audit/audit.log (deleted)
+ read -r mount

set +x
+ set +x

# DNS Resolution Details
cat /etc/nsswitch.conf | grep 'hosts:';
hosts:      files dns myhostname

cat /etc/resolv.conf;
# This is /run/systemd/resolve/resolv.conf managed by man:systemd-resolved(8).
# Do not edit.
#
# This file might be symlinked as /etc/resolv.conf. If you're looking at
# /etc/resolv.conf and seeing this text, you have followed the symlink.
#
# This is a dynamic resolv.conf file for connecting local clients directly to
# all known uplink DNS servers. This file lists all configured search domains.
#
# Third party programs should typically not access this file directly, but only
# through the symlink at /etc/resolv.conf. To manage man:resolv.conf(5) in a
# different way, replace this symlink by a static file or a different symlink.
#
# See man:systemd-resolved.service(8) for details about the supported modes of
# operation for /etc/resolv.conf.

nameserver 172.31.0.2
search ec2.internal

cat /etc/hosts;
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost6 localhost6.localdomain6

hostname -f
ip-172-31-39-66.ec2.internal

HOSTNAME=$(hostname -f);

(time dig $(hostname -f) +noadditional +noquestion +nocomments +noclass +nocmd) |& grep -v cmd | grep -v -e '^$'
ip-172-31-39-66.ec2.internal. 56 A	172.31.39.66
;; Query time: 0 msec
;; SERVER: 172.31.0.2#53(172.31.0.2) (UDP)
;; WHEN: Sun Jan 18 17:15:52 UTC 2026
;; MSG SIZE  rcvd: 73
real	0m0.016s
user	0m0.007s
sys	0m0.006s

(time getent hosts $HOSTNAME) |& grep -v -e '^$';
fe80::c44:6ff:febc:b6d7 ip-172-31-39-66.ec2.internal
real	0m0.004s
user	0m0.002s
sys	0m0.000s

MYIP=$(getent hosts $HOSTNAME | cut -d ' ' -f 1);

(time dig -x $MYIP +noadditional +noquestion +nocomments +noclass +nocmd) |& grep -v cmd | grep -v -e '^$'
8.e.f.ip6.arpa.		10754	SOA	localhost. nobody.invalid. 1 3600 1200 604800 10800
;; Query time: 0 msec
;; SERVER: 172.31.0.2#53(172.31.0.2) (UDP)
;; WHEN: Sun Jan 18 17:15:52 UTC 2026
;; MSG SIZE  rcvd: 174
real	0m0.026s
user	0m0.014s
sys	0m0.000s

(time getent hosts $MYIP) |& grep -v -e '^$';
fe80::c44:6ff:febc:b6d7 ip-172-31-39-66.ec2.internal
real	0m0.002s
user	0m0.000s
sys	0m0.002s

# dump network statistics
netstat -s -e
Ip:
    Forwarding: 2
    11667 total packets received
    5 with invalid addresses
    0 forwarded
    0 incoming packets discarded
    11662 incoming packets delivered
    8436 requests sent out
Icmp:
    3 ICMP messages received
    0 input ICMP message failed
    ICMP input histogram:
        destination unreachable: 3
    3 ICMP messages sent
    0 ICMP messages failed
    ICMP output histogram:
        destination unreachable: 3
IcmpMsg:
        InType3: 3
        OutType3: 3
Tcp:
    353 active connection openings
    188 passive connection openings
    42 failed connection attempts
    3 connection resets received
    17 connections established
    11382 segments received
    8307 segments sent out
    48 segments retransmitted
    0 bad segments received
    176 resets sent
Udp:
    274 packets received
    3 packets to unknown port received
    0 packet receive errors
    278 packets sent
    0 receive buffer errors
    0 send buffer errors
UdpLite:
TcpExt:
    122 TCP sockets finished time wait in fast timer
    39 delayed acks sent
    Quick ack mode was activated 6 times
    1181 packet headers predicted
    1088 acknowledgments not containing data payload received
    982 predicted acknowledgments
    TCPLostRetransmit: 32
    TCPTimeouts: 40
    TCPLossProbes: 8
    TCPBacklogCoalesce: 158
    TCPDSACKOldSent: 6
    25 connections reset due to unexpected data
    2 connections reset due to early user close
    TCPRcvCoalesce: 3054
    TCPAutoCorking: 21
    TCPFromZeroWindowAdv: 1
    TCPToZeroWindowAdv: 1
    TCPOrigDataSent: 2642
    TCPKeepAlive: 3
    TCPDelivered: 2665
    TcpTimeoutRehash: 40
IpExt:
    InOctets: 92529310
    OutOctets: 1540211
    InNoECTPkts: 36687
MPTcpExt:

# dump instance metrics
if [ "$dumpType" == "full" ]
then
  mon-tool --local_metrics
fi
2026-01-18 17:15:53,316 WARN main: Going to buffer response body of large or unknown size. Using getResponseBodyAsStream instead is recommended.
{
  "Customer-Memory-Top10": {
    "name": "Customer-Memory-Top10",
    "value": 10.899999999999999,
    "unit": "Percent",
    "time": 1768756552682,
    "subMetrics": [
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Dproc_jar -Djava.net.preferIPv4Stack\u003dtrue -server -XX:+ExitOnOutOfMemoryError --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.x509\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt/var/lib/hadoop/steps/s-01468903VXWGHK3TPVLY/tmp -Dyarn.log.dir\u003d/mnt/var/log/hadoop/steps/s-01468903VXWGHK3TPVLY -Dyarn.log.file\u003dsyslog -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/mnt/var/log/hadoop/steps/s-01468903VXWGHK3TPVLY -Dhadoop.log.file\u003dsyslog -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dhadoop -Dhadoop.root.logger\u003dINFO,DRFA -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender -Dsun.net.inetaddr.ttl\u003d30 org.apache.hadoop.util.RunJar /mnt/var/lib/hadoop/steps/s-01468903VXWGHK3TPVLY/dsp3-1.0.0.jar com.example.DirtDriver s3a://dsp-ass3-first10-biarcs/ s3a://cfggii23/dsp3/output/run_small10/ s3a://cfggii23/dsp3/test/positive-preds.txt s3a://cfggii23/dsp3/test/negative-preds.txt 5-Memory",
        "value": 2.6,
        "unit": "Percent",
        "time": 1768756552680
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Dproc_timelineserver -Djava.net.preferIPv4Stack\u003dtrue -server -XX:+ExitOnOutOfMemoryError --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.x509\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl\u003d30 -Dyarn.log.dir\u003d/var/log/hadoop-yarn -Dyarn.log.file\u003dhadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/var/log/hadoop-yarn -Dhadoop.log.file\u003dhadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dyarn -Dhadoop.root.logger\u003dINFO,DRFA -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer-Memory",
        "value": 2.4,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/jvm/java-17-amazon-corretto.x86_64/bin/java -Xmx1500m -Xms300m -XX:+ExitOnOutOfMemoryError -XX:MinHeapFreeRatio\u003d10 -cp /usr/share/aws/aws-java-sdk-v2/*:/usr/share/aws/emr/emr-log-analytics-metrics/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride aws157.apppusher.Main-Memory",
        "value": 2.4,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/jvm/java-1.8.0-amazon-corretto.x86_64/bin/java -Xmx1024m -Xms300m -XX:OnOutOfMemoryError\u003dkill -9 %p -XX:MinHeapFreeRatio\u003d10 -server -cp /usr/share/aws/emr/emr-metrics-collector/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride emr.metricscollector.Main-Memory",
        "value": 1.2,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Dproc_kms -Djava.net.preferIPv4Stack\u003dtrue -server -XX:+ExitOnOutOfMemoryError --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.x509\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Dkms.config.dir\u003d/etc/hadoop-kms/conf -Dkms.log.dir\u003d/var/log/hadoop-kms -Dlog4j.configuration\u003dfile:/etc/hadoop-kms/conf/kms-log4j.properties -Dyarn.log.dir\u003d/var/log/hadoop-kms -Dyarn.log.file\u003dhadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/var/log/hadoop-kms -Dhadoop.log.file\u003dhadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dkms -Dhadoop.root.logger\u003dINFO,DRFA -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender -Dsun.net.inetaddr.ttl\u003d30 org.apache.hadoop.crypto.key.kms.server.KMSWebServer-Memory",
        "value": 1.1,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "java-Memory",
        "value": 0.8,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/systemd/systemd --switched-root --system --deserialize\u003d32-Memory",
        "value": 0.1,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/systemd/systemd-journald-Memory",
        "value": 0.1,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/systemd/systemd-resolved-Memory",
        "value": 0.1,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/systemd/systemd-udevd-Memory",
        "value": 0.1,
        "unit": "Percent",
        "time": 1768756552681
      }
    ]
  },
  "Instance-CPU-IOWait": {
    "name": "Instance-CPU-IOWait",
    "value": 0.25,
    "unit": "Percent",
    "time": 1768756547491
  },
  "EMR-Memory": {
    "name": "EMR-Memory",
    "value": 14.8,
    "unit": "Percent",
    "time": 1768756552682
  },
  "Instance-Memory-MemUtilization": {
    "name": "Instance-Memory-MemUtilization",
    "value": 25.1027,
    "unit": "Percentage",
    "time": 1768756544486
  },
  "HadoopNameNode-RunTime": {
    "name": "HadoopNameNode-RunTime",
    "value": 128.0,
    "unit": "Second",
    "time": 1768756552681
  },
  "InstanceController-Memory": {
    "name": "InstanceController-Memory",
    "value": 3.5,
    "unit": "Percent",
    "time": 1768756552681
  },
  "YarnResourceManager-Memory": {
    "name": "YarnResourceManager-Memory",
    "value": 2.5,
    "unit": "Percent",
    "time": 1768756552681
  },
  "HadoopNameNode-CPU": {
    "name": "HadoopNameNode-CPU",
    "value": 9.5,
    "unit": "Percent",
    "time": 1768756552681
  },
  "LogPusher-CPU": {
    "name": "LogPusher-CPU",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756552681
  },
  "YarnProxyServer-CPU": {
    "name": "YarnProxyServer-CPU",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756552681
  },
  "Instance-Disk-Used-/run/user/0": {
    "name": "Instance-Disk-Used-/run/user/0",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/run/user/0",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "YarnResourceManager-CPU": {
    "name": "YarnResourceManager-CPU",
    "value": 2.5,
    "unit": "Percent",
    "time": 1768756552681
  },
  "YarnResourceManager-Reboots": {
    "name": "YarnResourceManager-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756492664
  },
  "Instance-Disk-Used-/mnt": {
    "name": "Instance-Disk-Used-/mnt",
    "value": 2.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/mnt/var/cache/dnf/amazonlinux-5ca606579ad66bce/repodata",
        "value": 50.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/lib/rpm",
        "value": 36.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/log/journal/ec276fc410ae8f3bf6c5605dc1bcdbc7",
        "value": 25.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/cache/dnf",
        "value": 19.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/lib/dnf",
        "value": 5.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/cache/dnf/emr_apps-2d8a0c0bbdeef6d1/repodata",
        "value": 5.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/lib/texmf/web2c/luatex",
        "value": 3.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/cache/man",
        "value": 3.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/tmp",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/mnt/var/log/setup-dns",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "Instance-Disk-Used-/dev/shm": {
    "name": "Instance-Disk-Used-/dev/shm",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756373612
  },
  "InstanceController-RunTime": {
    "name": "InstanceController-RunTime",
    "value": 193.0,
    "unit": "Second",
    "time": 1768756552681
  },
  "YarnProxyServer-Reboots": {
    "name": "YarnProxyServer-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756492665
  },
  "LogPusher-Reboots": {
    "name": "LogPusher-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756372684
  },
  "Customer-CPU": {
    "name": "Customer-CPU",
    "value": 189.60000000000002,
    "unit": "Percent",
    "time": 1768756552681
  },
  "YarnResourceManager-RunTime": {
    "name": "YarnResourceManager-RunTime",
    "value": 108.0,
    "unit": "Second",
    "time": 1768756552681
  },
  "Instance-Disk-Used-/mnt1": {
    "name": "Instance-Disk-Used-/mnt1",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/mnt1",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "Instance-Disk-Used-/boot/efi": {
    "name": "Instance-Disk-Used-/boot/efi",
    "value": 13.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/boot/efi",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "YarnProxyServer-RunTime": {
    "name": "YarnProxyServer-RunTime",
    "value": 112.0,
    "unit": "Second",
    "time": 1768756552681
  },
  "MRHistoryServer-CPU": {
    "name": "MRHistoryServer-CPU",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756552681
  },
  "Instance-Disk-Used-/emr": {
    "name": "Instance-Disk-Used-/emr",
    "value": 2.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/emr/setup-devices",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-state",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/run",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/log/bootstrap-actions",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/log",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/lib/sslKeys",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/lib/info",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/lib",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/instance-controller/db",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/emr/apppusher/run",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "HadoopNameNode-Reboots": {
    "name": "HadoopNameNode-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756432672
  },
  "InstanceController-CPU": {
    "name": "InstanceController-CPU",
    "value": 4.0,
    "unit": "Percent",
    "time": 1768756552681
  },
  "LogPusher-Memory": {
    "name": "LogPusher-Memory",
    "value": 2.4,
    "unit": "Percent",
    "time": 1768756552681
  },
  "Customer-CPU-Top10": {
    "name": "Customer-CPU-Top10",
    "value": 189.60000000000002,
    "unit": "Percent",
    "time": 1768756552681,
    "subMetrics": [
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Dproc_jar -Djava.net.preferIPv4Stack\u003dtrue -server -XX:+ExitOnOutOfMemoryError --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.x509\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Djava.io.tmpdir\u003d/mnt/var/lib/hadoop/steps/s-01468903VXWGHK3TPVLY/tmp -Dyarn.log.dir\u003d/mnt/var/log/hadoop/steps/s-01468903VXWGHK3TPVLY -Dyarn.log.file\u003dsyslog -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/mnt/var/log/hadoop/steps/s-01468903VXWGHK3TPVLY -Dhadoop.log.file\u003dsyslog -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dhadoop -Dhadoop.root.logger\u003dINFO,DRFA -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender -Dsun.net.inetaddr.ttl\u003d30 org.apache.hadoop.util.RunJar /mnt/var/lib/hadoop/steps/s-01468903VXWGHK3TPVLY/dsp3-1.0.0.jar com.example.DirtDriver s3a://dsp-ass3-first10-biarcs/ s3a://cfggii23/dsp3/output/run_small10/ s3a://cfggii23/dsp3/test/positive-preds.txt s3a://cfggii23/dsp3/test/negative-preds.txt 5-CPU",
        "value": 143.3,
        "unit": "Percent",
        "time": 1768756552680
      },
      {
        "name": "java-CPU",
        "value": 41.8,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/jvm/java-1.8.0-amazon-corretto.x86_64/bin/java -Xmx1024m -Xms300m -XX:OnOutOfMemoryError\u003dkill -9 %p -XX:MinHeapFreeRatio\u003d10 -server -cp /usr/share/aws/emr/emr-metrics-collector/lib/*:/home/hadoop/conf -Dlog4j.defaultInitOverride emr.metricscollector.Main-CPU",
        "value": 2.0,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "[rcu_preempt]-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/sbin/httpd -k start -DFOREGROUND8071-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Dproc_timelineserver -Djava.net.preferIPv4Stack\u003dtrue -server -XX:+ExitOnOutOfMemoryError --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.x509\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -XX:+ExitOnOutOfMemoryError -Dsun.net.inetaddr.ttl\u003d30 -Dyarn.log.dir\u003d/var/log/hadoop-yarn -Dyarn.log.file\u003dhadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d:/usr/lib/hadoop-lzo/lib/native:/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/var/log/hadoop-yarn -Dhadoop.log.file\u003dhadoop-yarn-timelineserver-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dyarn -Dhadoop.root.logger\u003dINFO,DRFA -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender org.apache.hadoop.yarn.server.applicationhistoryservice.ApplicationHistoryServer-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/jvm/jre-17/bin/java -Dproc_kms -Djava.net.preferIPv4Stack\u003dtrue -server -XX:+ExitOnOutOfMemoryError --add-exports\u003djdk.compiler/com.sun.tools.javac.util\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.x509\u003dALL-UNNAMED --add-exports\u003djava.base/sun.security.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.io\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.reflect\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang\u003dALL-UNNAMED --add-opens\u003djava.base/java.math\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent\u003dALL-UNNAMED -XX:+IgnoreUnrecognizedVMOptions --add-opens\u003djava.base/java.net\u003dALL-UNNAMED --add-opens\u003djava.base/java.text\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.concurrent.atomic\u003dALL-UNNAMED --add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.cs\u003dALL-UNNAMED --add-opens\u003djava.base/java.time\u003dALL-UNNAMED --add-opens\u003djava.base/java.util.regex\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.ref\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.reflect\u003dALL-UNNAMED --add-opens\u003djava.sql/java.sql\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util\u003dALL-UNNAMED --add-opens\u003djava.base/jdk.internal.util.random\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED --add-opens\u003djava.base/sun.util.calendar\u003dALL-UNNAMED --add-opens\u003djdk.management/com.sun.management.internal\u003dALL-UNNAMED -Dkms.config.dir\u003d/etc/hadoop-kms/conf -Dkms.log.dir\u003d/var/log/hadoop-kms -Dlog4j.configuration\u003dfile:/etc/hadoop-kms/conf/kms-log4j.properties -Dyarn.log.dir\u003d/var/log/hadoop-kms -Dyarn.log.file\u003dhadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dyarn.home.dir\u003d/usr/lib/hadoop-yarn -Dyarn.root.logger\u003dINFO,console -Djava.library.path\u003d/usr/lib/hadoop/lib/native -Dhadoop.log.dir\u003d/var/log/hadoop-kms -Dhadoop.log.file\u003dhadoop-kms-kms-ip-172-31-39-66.ec2.internal.log -Dhadoop.home.dir\u003d/usr/lib/hadoop -Dhadoop.id.str\u003dkms -Dhadoop.root.logger\u003dINFO,DRFA -Dhadoop.policy.file\u003dhadoop-policy.xml -Dhadoop.security.logger\u003dINFO,NullAppender -Dsun.net.inetaddr.ttl\u003d30 org.apache.hadoop.crypto.key.kms.server.KMSWebServer-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "top-CPU",
        "value": 0.5,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "/usr/lib/systemd/systemd --switched-root --system --deserialize\u003d32-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756552681
      },
      {
        "name": "[kthreadd]-CPU",
        "value": 0.0,
        "unit": "Percent",
        "time": 1768756552681
      }
    ]
  },
  "MRHistoryServer-Reboots": {
    "name": "MRHistoryServer-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756492665
  },
  "Instance-Disk-Used-/run/user/990": {
    "name": "Instance-Disk-Used-/run/user/990",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/run/user/990/systemd/generator.late",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990/systemd/units",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990/systemd/inaccessible/dir",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990/systemd/inaccessible",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990/systemd/generator.late/xdg-desktop-autostart.target.wants",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990/systemd",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990/pulse",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/user/990",
        "value": 0.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "Instance-Disk-Used-/run": {
    "name": "Instance-Disk-Used-/run",
    "value": 1.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/run/udev/data",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/tmpfiles.d",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/users",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/transient",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/sessions",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/seats",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/resolve",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/network/70-ens5.network.d",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/netif/links",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/run/systemd/netif/leases",
        "value": 1.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "HadoopNameNode-Memory": {
    "name": "HadoopNameNode-Memory",
    "value": 2.5,
    "unit": "Percent",
    "time": 1768756552681
  },
  "Instance-Memory-MemFree": {
    "name": "Instance-Memory-MemFree",
    "value": 11025.9,
    "unit": "Megabytes",
    "time": 1768756544486
  },
  "EMR-CPU": {
    "name": "EMR-CPU",
    "value": 17.0,
    "unit": "Percent",
    "time": 1768756552681
  },
  "Customer-Memory": {
    "name": "Customer-Memory",
    "value": 11.499999999999996,
    "unit": "Percent",
    "time": 1768756552682
  },
  "LogPusher-RunTime": {
    "name": "LogPusher-RunTime",
    "value": 195.0,
    "unit": "Second",
    "time": 1768756552681
  },
  "Instance-Disk-Used-/": {
    "name": "Instance-Disk-Used-/",
    "value": 46.0,
    "unit": "Percent",
    "time": 1768756373612,
    "subMetrics": [
      {
        "name": "/usr/share/aws/aws-java-sdk-v2",
        "value": 656.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/bin",
        "value": 451.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib64",
        "value": 373.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/share/aws/aws-java-sdk",
        "value": 371.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib/locale",
        "value": 214.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib/jvm/java-25-amazon-corretto.x86_64/lib",
        "value": 206.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib/jvm/java-23-amazon-corretto.x86_64/lib",
        "value": 205.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib/jvm/java-21-amazon-corretto.x86_64/lib",
        "value": 203.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib/jvm/java-11-amazon-corretto.x86_64/lib",
        "value": 203.0,
        "unit": "Megabytes",
        "time": 1768756373612
      },
      {
        "name": "/usr/lib/jvm/java-17-amazon-corretto.x86_64/lib",
        "value": 188.0,
        "unit": "Megabytes",
        "time": 1768756373612
      }
    ]
  },
  "Instance-Disk-Used-/dev": {
    "name": "Instance-Disk-Used-/dev",
    "value": 0.0,
    "unit": "Percent",
    "time": 1768756373611
  },
  "MRHistoryServer-Memory": {
    "name": "MRHistoryServer-Memory",
    "value": 2.5,
    "unit": "Percent",
    "time": 1768756552681
  },
  "YarnProxyServer-Memory": {
    "name": "YarnProxyServer-Memory",
    "value": 1.4,
    "unit": "Percent",
    "time": 1768756552681
  },
  "InstanceController-Reboots": {
    "name": "InstanceController-Reboots",
    "value": 0.0,
    "unit": "Count",
    "time": 1768756372681
  },
  "IC-TimeSinceHeartbeat": {
    "name": "IC-TimeSinceHeartbeat",
    "value": 9.0,
    "unit": "Seconds",
    "time": 1768756552483
  },
  "Instance-CPU-CPUUtilization": {
    "name": "Instance-CPU-CPUUtilization",
    "value": 65.93,
    "unit": "Percent",
    "time": 1768756547491
  },
  "MRHistoryServer-RunTime": {
    "name": "MRHistoryServer-RunTime",
    "value": 115.0,
    "unit": "Second",
    "time": 1768756552681
  }
}

# Resource Manager and Name Node details
isMaster=$(grep isMaster /emr/instance-controller/lib/info/instance.json | grep true)
isHACluster=$(grep haEnabled /emr/instance-controller/lib/info/extraInstanceData.json | grep true)
if [ -n "$isMaster" ] && [ -n "$isHACluster" ]
then
  echo "============= Resource Manager status report ============="
  sudo -u hadoop yarn rmadmin -getAllServiceState
  echo "================ Name Node status report ================="
  sudo -u hadoop hdfs haadmin -getAllServiceState
fi
